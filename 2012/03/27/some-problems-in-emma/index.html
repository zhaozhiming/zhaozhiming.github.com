<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>ä½¿ç”¨emmaæ—¶é‡åˆ°çš„ä¸€äº›é—®é¢˜ - Hacker and Geeker&#39;s Way</title>
    <meta name="author" content="">
    
	<meta name="description" content="ä½¿ç”¨emmaæ—¶é‡åˆ°çš„ä¸€äº›é—®é¢˜"> <!-- TODO: truncate -->
	<meta name="keywords" content="emma,é—®é¢˜">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="Hacker and Geeker&#39;s Way" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='/stylesheets/font.css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/font.css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/font.css?family=Amethysta+One' rel='stylesheet' type='text/css'>
	  <script src="/javascripts/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-100485541-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


<meta name="generator" content="Hexo 6.3.0"></head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        Hacker and Geeker&#39;s Way
    </div>
</h1>
<span class="subtitle"></span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a target="_blank" rel="noopener" href="https://github.com/zhaozhiming" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a target="_blank" rel="noopener" href="http://www.twitter.com/kingzzm" class="twitter" title="Twitter"></a>
  </li>
  
  
  <!-- LinkedIn -->
  <li>
  <a target="_blank" rel="noopener" href="http://www.linkedin.com/in/zhaozhiming" class="linkedin" title="LinkedIn"></a>
  </li>
  
  
  
  
  
  <!-- Stackoverflow -->
  <li>
  <a target="_blank" rel="noopener" href="http://stackoverflow.com/users/1954315/zhaozhiming" class="stackoverflow" title="Stackoverflow"></a>
  </li>
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    <li><a href="/about/index.html">About</a></li>
    
    <li>
    <div id="dark">
        <form action="//www.google.com.hk/search" method="get" accept-charset="UTF-8" id="search">
            <input type="hidden" name="sitesearch" value="https://zhaozhiming.github.io" />
            <input type="text" name="q" results="0" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>


<div id="toload">
<!-- begin toload -->
    <div id="content">
        <div class="inner">
<article class="post">
	<h2 class="title">ä½¿ç”¨emmaæ—¶é‡åˆ°çš„ä¸€äº›é—®é¢˜</h2>
    <div class="meta">
        <div class="date">Published on: <time datetime="2012-03-27T14:05:00.000Z" itemprop="datePublished">3æœˆ 27, 2012</time>
</div>
        <div class="tags">Tags: 

<a href="/tags/ant/">ant</a> <a href="/tags/jenkins/">jenkins</a> <a href="/tags/emma/">emma</a>
</div>
    </div>
	<div class="entry-content"><p>ä»Šå¤©åœ¨ç”¨ä½¿ç”¨emmaçš„è¿‡ç¨‹ä¸­é‡åˆ°äº†å‡ ä¸ªé—®é¢˜ï¼Œè®°å½•ä¸€ä¸‹.  </p>
<p><strong>1.è·‘junitè¿‡ç¨‹ä¸­æ²¡åŠæ³•äº§ç”Ÿcoverage dataæ–‡ä»¶ï¼Œå¯¼è‡´æœ€åæ²¡åŠæ³•å‡ºemmaæŠ¥å‘Šï¼Œä¸Šå®˜ç½‘æŸ¥äº†ä¸€ä¸‹åŸå› å¦‚ä¸‹ï¼š</strong>  </p>
<span id="more"></span>  
<blockquote><p>I have instrumented my classes but am not getting any coverage dataâ€¦<br>This question has been asked several times and in all cases the users forgot to package or deploy the instrumented versions of their classes. Please check that your build places EMMA-instrumented classes ahead of the normal application classpath at runtime.</p>
</blockquote> 
<p>æ„æ€æ˜¯emmaä¼šæ ¹æ®å·¥ç¨‹é‡Œé¢çš„classæ–‡ä»¶äº§ç”Ÿè‡ªå·±çš„instrumented classï¼Œjunitåœ¨è·‘å•å…ƒæµ‹è¯•çš„æ—¶å€™ï¼Œclasspathè¦æŠŠå®šä¹‰emmaçš„classæ–‡ä»¶è·¯å¾„æ”¾åœ¨é¡¹ç›®classæ–‡ä»¶è·¯å¾„å‰é¢ï¼Œæ‰èƒ½äº§ç”Ÿcoverage dataæ–‡ä»¶ã€‚  </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">junit</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">classpath</span> <span class="attr">location</span>=<span class="string">&quot;$&#123;emma.classes.dir&#125;&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">classpath</span> <span class="attr">location</span>=<span class="string">&quot;$&#123;project.classes.dir&#125;&quot;</span>/&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">junit</span>&gt;</span></span><br></pre></td></tr></table></figure>  

<p><strong>2.emmaçš„ç¤ºä¾‹ä»£ç é‡Œé¢ï¼Œreportçš„sourcepathå±æ€§åªæœ‰ä¸€ä¸ªsrcè·¯å¾„ï¼Œå¦‚æœé¡¹ç›®é‡Œé¢æœ‰å¤šä¸ªsrcè·¯å¾„åŒæ—¶è¦è¿›è¡Œè¦†ç›–ç‡æ£€æŸ¥çš„è¯ï¼Œåˆ™éœ€è¦è¿™æ ·å†™ï¼š</strong>  </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">report</span> <span class="attr">sourcepath</span>=<span class="string">&quot;$&#123;src1&#125;;$&#123;src2&#125;;$&#123;src3&#125;&quot;</span>&gt;</span></span><br><span class="line">   ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">report</span>&gt;</span></span><br></pre></td></tr></table></figure>  
<p>ä¸åŒçš„srcè·¯å¾„ç”¨æ“ä½œç³»ç»Ÿçš„classpathåˆ†éš”ç¬¦æˆ–é€—å·éš”å¼€ï¼Œæ¯”å¦‚windowç”¨åˆ†å·éš”å¼€ï¼Œå®˜ç½‘æ˜¯è¿™æ ·è§£é‡Šçš„ï¼š  </p>
<blockquote><p>sourcepath : An optional source path to use for report generation (a path-like structure). It is interpreted as a list of directories (separated by the OS-specific classpath separator or comma) containing .java source files. The local path names within each directory should reflect class package names. (Currently, only the HTML report generator uses this data, and only atmethod report depth.)</p>
</blockquote>  
<p><strong>3.jenkinsçš„emmaæ’ä»¶å¯ä»¥æ˜¾ç¤ºè¦†ç›–ç‡çš„è¶‹åŠ¿ï¼Œå·²ç»åŒ…ï¼Œç±»ï¼Œæ–¹æ³•çš„è¦†ç›–ç‡æƒ…å†µï¼Œä½†ä¸æ”¯æŒé“¾æ¥æ˜¾ç¤ºä»£ç æºæ–‡ä»¶ï¼Œçœ‹äº†ä¸‹jenkinsçš„å®˜ç½‘ï¼Œæœ‰äººå·²ç»å¯¹æ’ä»¶æäº†è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œä½†å›å¤è¯´æ— æ³•å®ç°ï¼Œè¯´æ˜å¦‚ä¸‹ï¼š</strong>    </p>
<blockquote><p> This was an obvious feature and so I tried to do this, but the problem is that the HTML file names and anchors that EMMA puts are just random numbers. So Hudson cannot link to the appropriate portion of those HTML files.</p>
<p>I also thought about generating those reports by myself in Hudson, but EMMA doesnâ€™t leave the line-by-line coverage information in XML file either.</p>
<p>So that leaves me no choice but to parse emmaâ€™s data file directly. So this is bit involving.ã€€ã€€</p>
</blockquote>  
<p>æ„æ€æ˜¯è¯´emmaçš„htmlæºæ–‡ä»¶æ˜¯ç”¨éšæœºæ•°å­—å‘½åï¼Œæ‰€ä»¥åœ¨xmlæ–‡ä»¶ä¸­æ— æ³•é“¾æ¥è¿™äº›htmlæºæ–‡ä»¶ï¼Œemmaæ²¡æœ‰ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œæ’ä»¶ä½œè€…ä¹Ÿæ— æ³•å®Œæˆè¿™ä¸ªéœ€æ±‚:(  </p>
<p>æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯ç”¨doc linkæ’ä»¶åœ¨jenkinsé¡µé¢ä¸Šç›´æ¥é“¾æ¥coverage.htmlæ–‡ä»¶ã€‚</p>
</div>

</article>
<section id="appreciates">
  <center>
	<h2>èµèµ</h2>
    <div class="post-footer">
      <div>
	    <h4>å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œå¯ä»¥æèµ æˆ‘å–æ¯å’–å•¡ğŸ˜Œï¼Œæèµ æ–¹å¼ï¼š</h4>
        <div class="digital-wallet">
          <h6>BTC åœ°å€ï¼š3LYgSyf7ddMALwGWPQr3PY4wzjsTDdg1oV</h6>
          <h6>ETH åœ°å€ï¼š0x0C9b27c89A61aadb0aEC24CA8949910Cbf77Aa73</h6>
        </div>
        <div class="wechat_appreciates">
          <img src="/images/wechat_appreciates.png" alt="qrcode" width="250" >
        </div>
      </div>
      <div>
	    <h4>æ–‡ç« å·²åŒæ­¥æ›´æ–°å…¬ä¼—å·ï¼Œæ¬¢è¿å…³æ³¨</h4>
        <div class="wechat_appreciates">
          <img src="/images/wxgzh_qrcode.jpg" alt="qrcode" width="250" >
        </div>
      </div>
    </div>
  </center>
</section>



    
      <script type="text/javascript">
        var disqus_config = function () {
            this.page.url = 'https://zhaozhiming.github.io/2012/03/27/some-problems-in-emma/';
            this.page.identifier = 'https://zhaozhiming.github.io/2012/03/27/some-problems-in-emma/';
        };

        (function() {
          var d = document, s = d.createElement('script');
          s.src = '//zhaozhiming.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>

</div>

    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2025

    èµµèŠæ˜
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a target="_blank" rel="noopener" href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a target="_blank" rel="noopener" href="http://github.com/panks/fabric">fabric</a> by <a target="_blank" rel="noopener" href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5608723650603289" crossorigin="anonymous"></script>
</body>
</html>
