<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>以太坊工具包 Ethers.js 使用介绍 - Hacker and Geeker&#39;s Way</title>
    <meta name="author" content="">
    
	<meta name="description" content="以太坊工具包 Ethers.js 使用介绍"> <!-- TODO: truncate -->
	<meta name="keywords" content="ethereum,ethersjs">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="Hacker and Geeker&#39;s Way" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='/stylesheets/font.css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/font.css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/font.css?family=Amethysta+One' rel='stylesheet' type='text/css'>
	  <script src="/javascripts/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-100485541-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


<meta name="generator" content="Hexo 6.3.0"></head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        Hacker and Geeker&#39;s Way
    </div>
</h1>
<span class="subtitle"></span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a target="_blank" rel="noopener" href="https://github.com/zhaozhiming" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a target="_blank" rel="noopener" href="http://www.twitter.com/kingzzm" class="twitter" title="Twitter"></a>
  </li>
  
  
  <!-- LinkedIn -->
  <li>
  <a target="_blank" rel="noopener" href="http://www.linkedin.com/in/zhaozhiming" class="linkedin" title="LinkedIn"></a>
  </li>
  
  
  
  
  
  <!-- Stackoverflow -->
  <li>
  <a target="_blank" rel="noopener" href="http://stackoverflow.com/users/1954315/zhaozhiming" class="stackoverflow" title="Stackoverflow"></a>
  </li>
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    <li><a href="/about/index.html">About</a></li>
    
    <li>
    <div id="dark">
        <form action="//www.google.com.hk/search" method="get" accept-charset="UTF-8" id="search">
            <input type="hidden" name="sitesearch" value="https://zhaozhiming.github.io" />
            <input type="text" name="q" results="0" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>


<div id="toload">
<!-- begin toload -->
    <div id="content">
        <div class="inner">
<article class="post">
	<h2 class="title">以太坊工具包 Ethers.js 使用介绍</h2>
    <div class="meta">
        <div class="date">Published on: <time datetime="2018-04-25T12:18:00.000Z" itemprop="datePublished">4月 25, 2018</time>
</div>
        <div class="tags">Tags: 

<a href="/tags/ethereum/">ethereum</a> <a href="/tags/ethersjs/">ethersjs</a>
</div>
    </div>
	<div class="entry-content"><img src="/images/post/2018/04/ethers.png" class="" width="400" height="300">

<p>在之前的文章介绍过，以太坊提供了两种形式的 API，一种是 <a target="_blank" rel="noopener" href="https://github.com/ethereum/wiki/wiki/JSON-RPC">JSON RPC</a>，另外一种是 <a target="_blank" rel="noopener" href="https://github.com/ethereum/wiki/wiki/JavaScript-API">Javascript API</a> —— 通过 Web3 这个工具包进行 API 调用，Web3 功能强大但缺点就是账号相关的 API 比较少，而且它底层用到了一些 Node 原生库的依赖，导致其在 React Native（以下简称 RN） 中使用会有一些问题，因为 Node 和 RN 是 2 个不同的环境。</p>
<p>所以今天给大家介绍另外一个功能强大的 JS 以太坊工具库——<a target="_blank" rel="noopener" href="https://github.com/ethers-io/ethers.js/">Ethers.js</a>。</p>
<span id="more"></span>

<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Ethers.js 的官方介绍是这样的——针对以太坊钱包功能完整实现的工具包，其 API 文档也十分详尽，感兴趣的同学可以看<a target="_blank" rel="noopener" href="https://docs.ethers.io/ethers.js/html/">这里</a>。</p>
<p>在仓库维护上作者比较用心，issue 都能及时解答，更新也比较频繁，如果觉得这个库还不错的可以考虑给作者一些 Eth 捐赠，这是作者的以太坊账户地址：<code>0xEA517D5a070e6705Cc5467858681Ed953d285Eb9</code>。</p>
<h2 id="创建-导入钱包"><a href="#创建-导入钱包" class="headerlink" title="创建 &#x2F; 导入钱包"></a>创建 &#x2F; 导入钱包</h2><p>与 Web3 相比 Ethers.js 的账号相关 API 比较丰富，在文档介绍中，这一类 API 叫<code>钱包</code>API，钱包就是账户的意思，创建钱包有以下方式：</p>
<h3 id="创建随机地址的钱包"><a href="#创建随机地址的钱包" class="headerlink" title="创建随机地址的钱包"></a>创建随机地址的钱包</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> wallet = <span class="title class_">Wallet</span>.<span class="title function_">createRandom</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Address: &quot;</span> + wallet.<span class="property">address</span>);</span><br><span class="line"><span class="comment">// &quot;每次都会生成不一样的钱包地址&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="通过明文私钥创建钱包"><a href="#通过明文私钥创建钱包" class="headerlink" title="通过明文私钥创建钱包"></a>通过明文私钥创建钱包</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> privateKey = <span class="string">&quot;0x0123456789012345678901234567890123456789012345678901234567890123&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> wallet = <span class="keyword">new</span> <span class="title class_">Wallet</span>(privateKey);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Address: &quot;</span> + wallet.<span class="property">address</span>);</span><br><span class="line"><span class="comment">// &quot;Address: 0x14791697260E4c9A71f18484C9f997B308e59325&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="通过助记词创建钱包"><a href="#通过助记词创建钱包" class="headerlink" title="通过助记词创建钱包"></a>通过助记词创建钱包</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mnemonic = <span class="string">&quot;radar blur cabbage chef fix engine embark joy scheme fiction master release&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> wallet = <span class="title class_">Wallet</span>.<span class="title function_">fromMnemonic</span>(mnemonic);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Address: &quot;</span> + wallet.<span class="property">address</span>);</span><br><span class="line"><span class="comment">// &quot;Address: 0xaC39b311DCEb2A4b2f5d8461c1cdaF756F4F7Ae9&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="通过-keystore-创建钱包"><a href="#通过-keystore-创建钱包" class="headerlink" title="通过 keystore 创建钱包"></a>通过 keystore 创建钱包</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// keystore 是一个 json</span></span><br><span class="line"><span class="keyword">const</span> json = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(keystore);</span><br><span class="line"><span class="keyword">const</span> password = <span class="string">&quot;foo&quot;</span>;</span><br><span class="line"><span class="title class_">Wallet</span>.<span class="title function_">fromEncryptedWallet</span>(json, password).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">wallet</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Address: &quot;</span> + wallet.<span class="property">address</span>);</span><br><span class="line">    <span class="comment">// &quot;Address: 0x88a5C2d9919e46F883EB62F7b8Dd9d0CC45bc290&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>注意：这种方式在 RN 环境中执行效率非常低，在电脑上执行只要 5 秒不到，但在 RN 上要执行差不多 5 分钟。</p>
<h3 id="创建脑记忆的钱包"><a href="#创建脑记忆的钱包" class="headerlink" title="创建脑记忆的钱包"></a>创建脑记忆的钱包</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> username = <span class="string">&quot;support@ethers.io&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> password = <span class="string">&quot;password123&quot;</span>;</span><br><span class="line"><span class="title class_">Wallet</span>.<span class="title function_">fromBrainWallet</span>(username, password).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">wallet</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Address: &quot;</span> + wallet.<span class="property">address</span>);</span><br><span class="line">    <span class="comment">// &quot;Address: 0x7Ee9AE2a2eAF3F0df8D323d555479be562ac4905&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>脑记忆方式其实就是用户名和密码的方法，同样这种方式在 RN 环境执行效率也很差。</p>
<h2 id="导出钱包"><a href="#导出钱包" class="headerlink" title="导出钱包"></a>导出钱包</h2><p>导出钱包也是钱包应用的一个主要业务场景，分别有以下几种方式：</p>
<h3 id="导出明文私钥"><a href="#导出明文私钥" class="headerlink" title="导出明文私钥"></a>导出明文私钥</h3><p>因为每个钱包对象都有一个<code>privateKey</code>属性，所以导出私钥只要直接获取这个属性就可以了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> wallet = <span class="title class_">Wallet</span>.<span class="title function_">createRandom</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;导出私钥：&#x27;</span> + wallet.<span class="property">privateKey</span>);</span><br></pre></td></tr></table></figure>

<h3 id="导出助记词"><a href="#导出助记词" class="headerlink" title="导出助记词"></a>导出助记词</h3><p>跟私钥不同，不是每个钱包对象都有助记词属性，只有通过助记词导入的钱包对象有助记词<code>mnemonic</code>属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mnemonic = <span class="string">&quot;radar blur cabbage chef fix engine embark joy scheme fiction master release&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> wallet = <span class="title class_">Wallet</span>.<span class="title function_">fromMnemonic</span>(mnemonic);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;导出助记词：&#x27;</span> + wallet.<span class="property">mnemonic</span>);</span><br></pre></td></tr></table></figure>

<h3 id="导出-keystore"><a href="#导出-keystore" class="headerlink" title="导出 keystore"></a>导出 keystore</h3><p>钱包对象有一个<code>encrypt</code>方法可以导出钱包的 keystore，但该方法在 RN 环境中同样存在效率低下的问题。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> password = <span class="string">&quot;password123&quot;</span>;</span><br><span class="line"><span class="comment">// 回调函数可以获取导出进度</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">callback</span>(<span class="params">percent</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Encrypting: &quot;</span> + <span class="built_in">parseInt</span>(percent * <span class="number">100</span>) + <span class="string">&quot;% complete&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> keystore = <span class="keyword">await</span> wallet.<span class="title function_">encrypt</span>(password, callback);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;导出 keystore：&#x27;</span> + keystore);</span><br></pre></td></tr></table></figure>

<h2 id="Provider"><a href="#Provider" class="headerlink" title="Provider"></a>Provider</h2><p>钱包的创建是离线的，不需要依赖网络即可创建钱包地址，但如果想获取钱包的相关信息，比如金额、交易记录，又或者想广播交易的话，就需要让钱包连上以太坊的网络了。</p>
<p>在 Web3 中是用 provider 来进行网络连接的，Ethers.js 也是一样，而且 Ethers.js 提供了集成多种 Provider 的方式。</p>
<h3 id="Provider-类型"><a href="#Provider-类型" class="headerlink" title="Provider 类型"></a>Provider 类型</h3><ul>
<li>Etherscan Provider：连接 Etherscan API 的 provider，需要 2 个参数，一个是网络名称，一个查询 API 所需的 token（<a href="http://zhaozhiming.github.io/blog/2018/04/20/how-to-use-etherscan-api/">之前的文章</a> 有讲过，查询 Etherscan 的 API 时 apitoken 不是必须的，但如果没有的话会受到每秒 5 次的调用限制）。</li>
<li>Json Rpc Provider：连接本地以太坊网点的 Provider。</li>
<li>Infura Provider：连接 Infura 网络的 Provider，Infura 是一套以太坊的基础设施服务，同样有以太坊的主网络和测试网络。</li>
<li>Web3 Provider：连接已有 web3 对象的 provider。</li>
<li>Fallback Provider：连接一个可以是多种类型的 provider 集合，如果前面的 provider 有问题，会自动去连接后面的。</li>
</ul>
<h3 id="Provider-network"><a href="#Provider-network" class="headerlink" title="Provider network"></a>Provider network</h3><p>在 Provider 创建方法中都有一个参数<code>network</code>，它是一个字符串，代表网络名称，有如下值：</p>
<ul>
<li>homestead&#x2F;mainnet：以太坊主网络</li>
<li>morden: morden 测试网络（现在已经退役了）</li>
<li>ropsten&#x2F;testnet: ropsten 测试网络</li>
<li>rinkeby：rinkeby 测试网络</li>
<li>kovan：kovan 测试网络</li>
</ul>
<h3 id="与钱包集成"><a href="#与钱包集成" class="headerlink" title="与钱包集成"></a>与钱包集成</h3><p>在通过私钥创建钱包的方法中，除了第一个参数私钥外，还有一个可选参数就是 provider，所以我们可以这样将 provider 集成到钱包中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> provider = providers.<span class="title function_">getDefaultProvider</span>();</span><br><span class="line"><span class="keyword">const</span> wallet = <span class="keyword">new</span> <span class="title class_">Wallet</span>(privateKey, provider);</span><br></pre></td></tr></table></figure>

<p>也可以直接通过给钱包对象的 provider 属性赋值来集成 provider。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> provider = providers.<span class="title function_">getDefaultProvider</span>();</span><br><span class="line"><span class="keyword">const</span> wallet = <span class="keyword">new</span> <span class="title class_">Wallet</span>(privateKey);</span><br><span class="line">wallet.<span class="property">provider</span> = provider;</span><br></pre></td></tr></table></figure>

<h2 id="智能合约"><a href="#智能合约" class="headerlink" title="智能合约"></a>智能合约</h2><p>关于智能合约后面我会另外写一篇文章来介绍怎么使用 Ethers.js 来实现以太坊代币的业务操作，包括获取金额和交易等。</p>
<h2 id="交易"><a href="#交易" class="headerlink" title="交易"></a>交易</h2><p>交易功能比较简单，在钱包对象有对应的方法：<code>sendTransaction ( transaction )</code>和<code>send ( addressOrName, amountWei [ , options ] )</code>，大家可以自行查阅文档。</p>
<h2 id="生成助记词"><a href="#生成助记词" class="headerlink" title="生成助记词"></a>生成助记词</h2><p>还有一个比较常见的业务场景是生成助记词，Ethers.js 也很贴心地提供了这个功能：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> entropy = utils.<span class="title function_">randomBytes</span>(<span class="number">16</span>);</span><br><span class="line"><span class="keyword">const</span> mnemonicTemp = <span class="title class_">HDNode</span>.<span class="title function_">entropyToMnemonic</span>(entropy);</span><br><span class="line"><span class="comment">// 生成了 12 个随机单词，mnemonicTemp 为 &quot;radar blur cabbage chef fix engine embark joy scheme fiction master release&quot;;</span></span><br><span class="line"><span class="keyword">const</span> walelt = <span class="title class_">Wallet</span>.<span class="title function_">fromMnemonic</span>(mnemonicTemp);</span><br></pre></td></tr></table></figure>

<h2 id="工具类"><a href="#工具类" class="headerlink" title="工具类"></a>工具类</h2><p>Ethers.js 还提供了一些比较常用的工具方法，比如对 BigNumber 的操作。</p>
<h3 id="BigNumber-计算"><a href="#BigNumber-计算" class="headerlink" title="BigNumber 计算"></a>BigNumber 计算</h3><p>有人可能会问为什么需要操作 BigNumber？因为以太坊的计量单位是<code>Wei</code>，一个以太币是 10^18 Wei，如果用普通的 JS number 对象来存储操作的话，可能会因为数据溢出而导致结果异常。</p>
<p>常见的业务场景是：计算出当前钱包的价值，即用钱包账户金额（以太币数量）乘以货币单位汇率（美元或者人民币）得到最终结果。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 汇率，截止 2018-04-29，ETH 价格为 693.01 USD</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">USD_RATE</span> = <span class="number">693.01</span>;</span><br><span class="line"><span class="comment">// 钱包金额</span></span><br><span class="line"><span class="keyword">const</span> balance = <span class="keyword">await</span> wallet.<span class="title function_">getBalance</span>();</span><br><span class="line"><span class="comment">// bigNumber 不能和小数进行计算，所以要先将汇率变成整数</span></span><br><span class="line"><span class="keyword">const</span> rate = <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="variable constant_">USD_RATE</span> * <span class="number">100</span>);</span><br><span class="line"><span class="keyword">const</span> result = balance.<span class="title function_">mul</span>(rate).<span class="title function_">div</span>(<span class="number">100</span>)</span><br></pre></td></tr></table></figure>

<h3 id="BigNumber-格式化"><a href="#BigNumber-格式化" class="headerlink" title="BigNumber 格式化"></a>BigNumber 格式化</h3><p>计算好了结果后，我们需要将其转换成正常的数量单位并展示到前台，还好 Ethers.js 提供了相关的方法，还可以通过不同参数展示不同格式的结果。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> wei = utils.<span class="title function_">bigNumberify</span>(<span class="string">&quot;1000000000000000000000&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(utils.<span class="title function_">formatEther</span>(wei));</span><br><span class="line"><span class="comment">// &quot;1000.0&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(utils.<span class="title function_">formatEther</span>(wei, &#123;<span class="attr">commify</span>: <span class="literal">true</span>&#125;));</span><br><span class="line"><span class="comment">// &quot;1,000.0&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(utils.<span class="title function_">formatEther</span>(wei, &#123;<span class="attr">pad</span>: <span class="literal">true</span>&#125;));</span><br><span class="line"><span class="comment">// &quot;1000.000000000000000000&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(utils.<span class="title function_">formatEther</span>(wei, &#123;<span class="attr">commify</span>: <span class="literal">true</span>, <span class="attr">pad</span>: <span class="literal">true</span>&#125;));</span><br><span class="line"><span class="comment">// &quot;1,000.000000000000000000&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>其他工具方法还有 UTF8 字符串转换，地址 icap 转换等，感兴趣的同学可以自行参考文档。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>Ethers.js 是一个非常适合开发以太坊钱包应用的工具库，这里介绍的功能只是仓库功能的冰山一角，如果需要了解其更多功能的话，还请参阅官方文档。</p>
</div>

</article>
<section id="appreciates">
  <center>
	<h2>赞赏</h2>
    <div class="post-footer">
      <div>
	    <h4>如果文章对您有所帮助，可以捐赠我喝杯咖啡😌，捐赠方式：</h4>
        <div class="digital-wallet">
          <h6>BTC 地址：3LYgSyf7ddMALwGWPQr3PY4wzjsTDdg1oV</h6>
          <h6>ETH 地址：0x0C9b27c89A61aadb0aEC24CA8949910Cbf77Aa73</h6>
        </div>
        <div class="wechat_appreciates">
          <img src="/images/wechat_appreciates.png" alt="qrcode" width="250" >
        </div>
      </div>
      <div>
	    <h4>文章已同步更新公众号，欢迎关注</h4>
        <div class="wechat_appreciates">
          <img src="/images/wxgzh_qrcode.jpg" alt="qrcode" width="250" >
        </div>
      </div>
    </div>
  </center>
</section>



    
      <script type="text/javascript">
        var disqus_config = function () {
            this.page.url = 'https://zhaozhiming.github.io/2018/04/25/how-to-use-ethers-dot-js/';
            this.page.identifier = 'https://zhaozhiming.github.io/2018/04/25/how-to-use-ethers-dot-js/';
        };

        (function() {
          var d = document, s = d.createElement('script');
          s.src = '//zhaozhiming.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>

</div>

    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2025

    赵芝明
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a target="_blank" rel="noopener" href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a target="_blank" rel="noopener" href="http://github.com/panks/fabric">fabric</a> by <a target="_blank" rel="noopener" href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5608723650603289" crossorigin="anonymous"></script>
</body>
</html>
