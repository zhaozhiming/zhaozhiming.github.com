<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>ä½¿ç”¨ TestCafe è¿›è¡Œ Web è‡ªåŠ¨åŒ–æµ‹è¯• - Hacker and Geeker&#39;s Way</title>
    <meta name="author" content="">
    
	<meta name="description" content="ä½¿ç”¨ TestCafe è¿›è¡Œ Web è‡ªåŠ¨åŒ–æµ‹è¯•"> <!-- TODO: truncate -->
	<meta name="keywords" content="testcafe,auto-test,ui-test">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="Hacker and Geeker&#39;s Way" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='/stylesheets/font.css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/font.css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/font.css?family=Amethysta+One' rel='stylesheet' type='text/css'>
	  <script src="/javascripts/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-100485541-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


<meta name="generator" content="Hexo 6.3.0"></head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        Hacker and Geeker&#39;s Way
    </div>
</h1>
<span class="subtitle"></span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a target="_blank" rel="noopener" href="https://github.com/zhaozhiming" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a target="_blank" rel="noopener" href="http://www.twitter.com/kingzzm" class="twitter" title="Twitter"></a>
  </li>
  
  
  <!-- LinkedIn -->
  <li>
  <a target="_blank" rel="noopener" href="http://www.linkedin.com/in/zhaozhiming" class="linkedin" title="LinkedIn"></a>
  </li>
  
  
  
  
  
  <!-- Stackoverflow -->
  <li>
  <a target="_blank" rel="noopener" href="http://stackoverflow.com/users/1954315/zhaozhiming" class="stackoverflow" title="Stackoverflow"></a>
  </li>
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    <li><a href="/about/index.html">About</a></li>
    
    <li>
    <div id="dark">
        <form action="//www.google.com.hk/search" method="get" accept-charset="UTF-8" id="search">
            <input type="hidden" name="sitesearch" value="https://zhaozhiming.github.io" />
            <input type="text" name="q" results="0" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>


<div id="toload">
<!-- begin toload -->
    <div id="content">
        <div class="inner">
<article class="post">
	<h2 class="title">ä½¿ç”¨ TestCafe è¿›è¡Œ Web è‡ªåŠ¨åŒ–æµ‹è¯•</h2>
    <div class="meta">
        <div class="date">Published on: <time datetime="2019-01-28T09:27:00.000Z" itemprop="datePublished">1æœˆ 28, 2019</time>
</div>
        <div class="tags">Tags: 

<a href="/tags/testcafe/">testcafe</a> <a href="/tags/auto-test/">auto-test</a> <a href="/tags/ui-test/">ui-test</a>
</div>
    </div>
	<div class="entry-content"><img src="/images/post/2019/01/testcafe.png" class="" width="400" height="300">

<p>Web è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œåˆå« UI è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå›½å¤–å« End-to-End Testï¼ˆe2e, ç«¯åˆ°ç«¯æµ‹è¯•ï¼‰ï¼Œå¯ä»¥è®©é‡å¤ç¹ççš„æ‰‹å·¥æµ‹è¯•ï¼ˆ ä¿—ç§°ç‚¹ç‚¹ç‚¹ï¼‰é€šè¿‡ç¨‹åºè‡ªåŠ¨æ‰§è¡Œï¼Œå¯ä»¥æå¤§åœ°æå‡æµ‹è¯•äººå‘˜çš„æ•ˆç‡ï¼ˆæƒ³è±¡ä¸€ä¸‹ä»¥å‰å¦‚æœå›å½’æµ‹è¯•è¦æµ‹è¯•ä¸€å¤©çš„è¯ï¼Œä½¿ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•å¯èƒ½åªéœ€è¦ä¸åˆ° 1 å°æ—¶çš„æ—¶é—´ï¼‰ã€‚</p>
<p>ä»Šå¤©ä»‹ç»ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·æ–°è´µâ€”â€”<a target="_blank" rel="noopener" href="https://github.com/DevExpress/testcafe">TestCafe</a>ï¼Œå®ƒçš„åŠŸèƒ½å’Œå¼€å‘å›¢é˜Ÿéƒ½å¾ˆæ£’ï¼Œä½†ä¸€ç›´æ¯”è¾ƒä½è°ƒæ‰€ä»¥æ²¡æœ‰å…¶ä»–åŒç±»å·¥å…·å‡ºåï¼Œå¦‚æœä½ å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•æ„Ÿå…´è¶£ï¼Œä¸å¦¨å’Œæˆ‘ä¸€èµ·æ¥äº†è§£å®ƒã€‚</p>
<span id="more"></span>

<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>å®‰è£…æ–¹å¼å¯ä»¥æ ¹æ®ä½¿ç”¨åœºæ™¯æ¥é€‰æ‹©ï¼š</p>
<ul>
<li>å…¨å±€å®‰è£…ï¼š<code>npm i -g testcafe</code>ï¼Œç„¶åæ‰§è¡Œå‘½ä»¤<code>testcafe chrome e2e.test.js</code></li>
<li>é¡¹ç›®å®‰è£…ï¼š<code>npm i --dev testcafe</code>ï¼Œå¹¶åœ¨<code>package.json</code>ä¸­é…ç½®å¦‚ä¸‹å‘½ä»¤ï¼Œè¿™é‡Œçš„å‘½ä»¤æ„æ€æ˜¯ç”¨ TestCafe é€šè¿‡ Chrome æµè§ˆå™¨æ¥æ‰§è¡Œ<code>e2e</code>ç›®å½•ä¸‹çš„æµ‹è¯•æ¡ˆä¾‹ã€‚</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;test:e2e&quot;</span><span class="punctuation">:</span> <span class="string">&quot;testcafe chrome e2e/*&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="ç®€å•ç¤ºä¾‹"><a href="#ç®€å•ç¤ºä¾‹" class="headerlink" title="ç®€å•ç¤ºä¾‹"></a>ç®€å•ç¤ºä¾‹</h2><p>è¿™æ˜¯å®˜æ–¹æ–‡æ¡£ä¸Šçš„ç¤ºä¾‹æ–‡ä»¶ï¼Œæ·»åŠ äº†ä¸€äº›ä»£ç è¯´æ˜ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•ç”¨ TestCafe çš„é€‰æ‹©å™¨ï¼Œç”¨æ¥è·å–é¡µé¢å…ƒç´ </span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Selector</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;testcafe&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// fixture å¯ä»¥ç†è§£ä¸ºæµ‹è¯•é›†ï¼Œç±»ä¼¼å…¶ä»–æµ‹è¯•æ¡†æ¶é‡Œé¢çš„`describe`ï¼Œfixture å¯ä»¥åŒ…å«å¤šä¸ª test æµ‹è¯•æ¡ˆä¾‹</span></span><br><span class="line">fixture <span class="string">`Getting Started`</span></span><br><span class="line">  <span class="comment">// æŒ‡å®šåˆå§‹é¡µé¢</span></span><br><span class="line">  .<span class="property">page</span> <span class="string">`https://devexpress.github.io/testcafe/example`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•æ¡ˆä¾‹ä»£ç </span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;My first test&#x27;</span>, <span class="keyword">async</span> t =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> t</span><br><span class="line">    <span class="comment">// é€‰æ‹©æµ‹è¯•é¡µé¢å…ƒç´ ï¼Œè¿™é‡Œæ˜¯åœ¨ input æ¡†ä¸­è¾“å…¥æ–‡å­—</span></span><br><span class="line">    .<span class="title function_">typeText</span>(<span class="string">&#x27;#developer-name&#x27;</span>, <span class="string">&#x27;John Smith&#x27;</span>)</span><br><span class="line">    <span class="comment">// ç‚¹å‡»æŸä¸ªæŒ‰é’®</span></span><br><span class="line">    .<span class="title function_">click</span>(<span class="string">&#x27;#submit-button&#x27;</span>)</span><br><span class="line">    <span class="comment">// éªŒè¯è¿è¡Œç»“æœæ˜¯å¦ä¸é¢„æœŸç›¸ç¬¦</span></span><br><span class="line">    .<span class="title function_">expect</span>(<span class="title class_">Selector</span>(<span class="string">&#x27;#article-header&#x27;</span>).<span class="property">innerText</span>).<span class="title function_">eql</span>(<span class="string">&#x27;Thank you, John Smith!&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<img src="/images/post/2019/01/testcafe_result.png" class="">

<h2 id="ä½¿ç”¨ä»‹ç»"><a href="#ä½¿ç”¨ä»‹ç»" class="headerlink" title="ä½¿ç”¨ä»‹ç»"></a>ä½¿ç”¨ä»‹ç»</h2><p>Web è‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯å°†æ‰‹å·¥æµ‹è¯•è¡Œä¸ºé€šè¿‡ç¨‹åºæˆ–è€…è„šæœ¬è‡ªåŠ¨è¿è¡Œèµ·æ¥ï¼Œå›å¿†ä¸€ä¸‹æˆ‘ä»¬å¹³æ—¶çš„æµ‹è¯•å·¥ä½œï¼Œæ— éæ˜¯ä¸‹é¢å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>è¾“å…¥ç½‘å€æ‰“å¼€ç½‘é¡µ</li>
<li>æ“ä½œé¡µé¢å…ƒç´ </li>
<li>éªŒè¯ç»“æœæ˜¯å¦æ­£ç¡®</li>
</ul>
<p>å…¶ä¸­æœ€é‡è¦çš„ä¸€æ­¥å°±æ˜¯æ‰¾åˆ°éœ€è¦æ“ä½œçš„é¡µé¢å…ƒç´ ï¼ŒTestCafe æä¾›äº†å¼ºå¤§çš„ Selectorï¼ˆé€‰æ‹©å™¨ï¼‰æ¥ä¾›æˆ‘ä»¬æŸ¥æ‰¾ã€‚</p>
<h3 id="é€‰æ‹©å™¨-Selector"><a href="#é€‰æ‹©å™¨-Selector" class="headerlink" title="é€‰æ‹©å™¨ Selector"></a>é€‰æ‹©å™¨ Selector</h3><p>åˆ›å»ºä¸€ä¸ª Selector éå¸¸ç®€å•ï¼Œä¸‹é¢æ˜¯ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Selector</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;testcafe&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> usernameInput = <span class="title class_">Selector</span>(<span class="string">&#x27;#username&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>Selector è¿™ä¸ª API ç±»ä¼¼<code>document.querySelector()</code>ä¸€æ ·å¯ä»¥é€šè¿‡å¤šç§æŸ¥è¯¢æ–¹å¼æ¥æŸ¥è¯¢é¡µé¢å…ƒç´ ï¼š</p>
<ul>
<li>Selector(â€˜#idâ€™): æ ¹æ®<code>id</code>æŸ¥æ‰¾å…ƒç´ </li>
<li>Selector(â€˜.classâ€™)ï¼šæ ¹æ®æ ·å¼åç§°æŸ¥æ‰¾å…ƒç´ </li>
<li>Selector(â€˜divâ€™)ï¼šæ ¹æ® html æ ‡ç­¾æŸ¥æ‰¾å…ƒç´ </li>
<li>Selector(â€˜#id .class spanâ€™)ï¼šæ ¹æ®å¤šç§ç»„åˆæŸ¥æ‰¾å…ƒç´ </li>
</ul>
<h4 id="å‡½æ•°å¼é€‰æ‹©å™¨"><a href="#å‡½æ•°å¼é€‰æ‹©å™¨" class="headerlink" title="å‡½æ•°å¼é€‰æ‹©å™¨"></a>å‡½æ•°å¼é€‰æ‹©å™¨</h4><p>Selector ä¸ä»…å¯ä»¥å®ç°å¸¸è§„çš„é€‰æ‹©ï¼Œè¿˜å¯ä»¥é€šè¿‡å†…ç½®çš„ API æ¥è¿›è¡Œå…¶ä»–ç±»å‹çš„æŸ¥è¯¢ï¼š</p>
<ul>
<li>Selector(â€˜liâ€™).nth(1)ï¼šæŸ¥æ‰¾ç¬¬ä¸€ä¸ª li å…ƒç´ </li>
<li>Selector(â€˜labelâ€™).withText(â€˜fooâ€™)ï¼šæŸ¥æ‰¾ label ä¸­åŒ…å«<code>foo</code>æ–‡å­—çš„å…ƒç´ </li>
<li>Selector(â€˜divâ€™).withAttribute(â€˜attrNameâ€™, â€˜attrValueâ€™)ï¼šæŸ¥æ‰¾ div ä¸­åŒ…å«<code>attrName</code>å±æ€§ä¸”å€¼ä¸º<code>attrValue</code>çš„å…ƒç´ </li>
<li>æ›´å¤š API å¯ä»¥å‚è€ƒ<a target="_blank" rel="noopener" href="https://devexpress.github.io/testcafe/documentation/test-api/selecting-page-elements/selectors/functional-style-selectors.html#withattribute">å®˜æ–¹æ–‡æ¡£</a></li>
</ul>
<p>PSï¼š<code>withAttribute</code>éå¸¸æœ‰ç”¨ï¼Œåœ¨å¾ˆå¤šæµ‹è¯•æ¡†æ¶ä¸­éƒ½ä¼šå»ºè®®å¼€å‘äººå‘˜åœ¨é¡µé¢å…ƒç´ ä¸­æ·»åŠ ä¸€ä¸ª<code>testId</code>ï¼ˆ<a target="_blank" rel="noopener" href="https://github.com/callstack/react-native-testing-library">react-native-testing-library</a>ï¼‰æˆ–<code>data-testid</code>ï¼ˆ<a target="_blank" rel="noopener" href="https://github.com/kentcdodds/react-testing-library">react-testing-library</a>ï¼‰æ¥æŸ¥æ‰¾é¡µé¢å…ƒç´ ã€‚</p>
<p>ä½¿ç”¨<code>testid</code>æœ‰ä»¥ä¸‹å¥½å¤„ï¼š</p>
<ul>
<li>é¿å…åœ¨é¡µé¢å…ƒç´ ä¸Šæ·»åŠ <code>id</code>è¿™ç§æ±¡æŸ“é¡µé¢çš„å±æ€§</li>
<li>æé«˜æŸ¥æ‰¾é¡µé¢å…ƒç´ çš„æ•ˆç‡ï¼Œå› ä¸º<code>testid</code>å’Œ<code>id</code>ä¸€æ ·å¯ä»¥ç›´æ¥è·å–å”¯ä¸€çš„å…ƒç´ </li>
</ul>
<p>æ‰€ä»¥å¦‚æœæƒ³é€šè¿‡<code>testid</code>æ¥æŸ¥æ‰¾å…ƒç´ å°±å¯ä»¥è¿™æ ·åšï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Selector</span>(<span class="string">&#x27;div&#x27;</span>).<span class="title function_">withAttribute</span>(<span class="string">&#x27;testId&#x27;</span>, <span class="string">&#x27;foo&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="React-Selector"><a href="#React-Selector" class="headerlink" title="React Selector"></a>React Selector</h4><p>å¦‚æœä½ çš„ç½‘é¡µæ˜¯ç”¨ React å¼€å‘çš„ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ React çš„æ‰©å±• Selectorâ€”â€”<a target="_blank" rel="noopener" href="https://github.com/DevExpress/testcafe-react-selectors">React Selector</a> æ¥æŸ¥æ‰¾é¡µé¢å…ƒç´ ã€‚</p>
<p>ä½¿ç”¨<code>React Selector</code>å¯ä»¥é€šè¿‡ç»„ä»¶åè¿›è¡ŒæŸ¥æ‰¾å…ƒç´ ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ReactSelector</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;testcafe-react-selectors&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> todoInput = <span class="title class_">ReactSelector</span>(<span class="string">&#x27;TodoInput&#x27;</span>); <span class="comment">// ç»„ä»¶åæŸ¥æ‰¾</span></span><br><span class="line"><span class="keyword">const</span> todoItem = <span class="title class_">ReactSelector</span>(<span class="string">&#x27;TodoInput TodoItem&#x27;</span>); <span class="comment">// æŸ¥æ‰¾åµŒå¥—å­ç»„ä»¶</span></span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œä½¿ç”¨<code>React Selector</code>ä¸èƒ½åŒæ—¶ä½¿ç”¨<code>ç»„ä»¶å</code>+<code>html é€‰æ‹©å™¨</code>çš„æ–¹å¼ï¼Œæ¯”å¦‚<code>ReactSelector(&#39;TodoInput div&#39;)</code>è¿™ä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œå®ƒå¹¶ä¸ä¼šå»æŸ¥è¯¢<code>TodoInput</code>ç»„ä»¶ä¸‹çš„<code>div</code>å…ƒç´ ï¼Œè€Œæ˜¯ä¼šè½¬æ¢æˆè¿™æ ·çš„æŸ¥è¯¢ï¼š<code>Selector(&#39;.todoInput &gt; div&#39;)</code>ï¼Œå°±æ˜¯å°†ç»„ä»¶åè‡ªåŠ¨è½¬æ¢æˆ<code>class</code>ç„¶åå†æŸ¥è¯¢ã€‚</p>
<p>å¦å¤–<code>React Selector</code>è¿˜å¯ä»¥æ ¡éªŒç»„ä»¶çš„<code>props</code>å’Œ<code>state</code>ç­‰å‚æ•°ï¼Œæ›´å¤šè¯¦ç»†ä¿¡æ¯å¯ä»¥æŸ¥é˜…<a target="_blank" rel="noopener" href="https://github.com/DevExpress/testcafe-react-selectors">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h3 id="äº‹ä»¶ä¸æ–­è¨€"><a href="#äº‹ä»¶ä¸æ–­è¨€" class="headerlink" title="äº‹ä»¶ä¸æ–­è¨€"></a>äº‹ä»¶ä¸æ–­è¨€</h3><p>æ‰¾åˆ°é¡µé¢å…ƒç´ ä¹‹åï¼Œå°±å¯ä»¥å¯¹å…¶åšç›¸åº”çš„æ“ä½œå’Œæ ¡éªŒï¼Œäº‹ä»¶å’Œæ–­è¨€çš„éƒ¨åˆ†æ¯”è¾ƒç®€å•ï¼Œå¤§å®¶å¯ä»¥çœ‹çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œè¿™é‡Œå°±ä¸å¤šä»‹ç»äº†ï¼Œä¸‹é¢æ˜¯ä¸€äº›ç®€å•ç¤ºä¾‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äº‹ä»¶</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;My Test&#x27;</span>, <span class="keyword">async</span> t =&gt; &#123;</span><br><span class="line">  <span class="comment">// ç‚¹å‡»æŒ‰é’®</span></span><br><span class="line">  <span class="keyword">await</span> t.<span class="title function_">click</span>(<span class="string">&#x27;#submit-button&#x27;</span>);</span><br><span class="line">  <span class="comment">// æ–‡æœ¬è¾“å…¥</span></span><br><span class="line">  <span class="keyword">await</span> t.<span class="title function_">typeText</span>(<span class="string">&#x27;#foo-input&#x27;</span>, <span class="string">&#x27;Peter&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šçš„äº‹ä»¶è¯¦ç»†å†…å®¹å¯ä»¥å‚è€ƒ<a target="_blank" rel="noopener" href="https://devexpress.github.io/testcafe/documentation/test-api/actions/">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–­è¨€</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;My Test&#x27;</span>, <span class="keyword">async</span> t =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> t</span><br><span class="line">	.<span class="title function_">expect</span>(&#123; <span class="attr">a</span>: <span class="string">&#x27;bar&#x27;</span> &#125;).<span class="title function_">eql</span>(&#123; <span class="attr">a</span>: <span class="string">&#x27;bar&#x27;</span> &#125;) <span class="comment">// æ ¡éªŒ 2 ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰</span></span><br><span class="line">	.<span class="title function_">expect</span>(a === b).<span class="title function_">ok</span>(); <span class="comment">// æ ¡éªŒç»“æœæ˜¯å¦ä¸º true</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šçš„æ–­è¨€è¯¦ç»†å†…å®¹å¯ä»¥å‚è€ƒ<a target="_blank" rel="noopener" href="https://devexpress.github.io/testcafe/documentation/test-api/assertions/assertion-api.html">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<p>TestCafe è¿˜æä¾›äº†è®¿é—®é¡µé¢èŠ‚ç‚¹å±æ€§çš„ APIï¼Œå¸¸ç”¨çš„ API æœ‰ä¸‹é¢è¿™äº›ï¼š</p>
<ul>
<li>childElementCountï¼šè·å–å­å…ƒç´ ä¸ªæ•°</li>
<li>hasChildElements: æ˜¯å¦æœ‰å­å…ƒç´ </li>
<li>textContent: è·å–é¡µé¢å…ƒç´ çš„æ–‡æœ¬å†…å®¹</li>
<li>hasClass(className)ï¼šæ˜¯å¦æœ‰æŸä¸ª class æ ·å¼</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;My Test&#x27;</span>, <span class="keyword">async</span> t =&gt; &#123;</span><br><span class="line">  <span class="comment">// æ ¡éªŒå…ƒç´ æ˜¯å¦æ‹¥æœ‰æŸä¸ª class æ ·å¼</span></span><br><span class="line">  t.<span class="title function_">expect</span>(<span class="title class_">Selector</span>(<span class="string">&#x27;#article-header&#x27;</span>).<span class="title function_">hasClass</span>(<span class="string">&#x27;foo&#x27;</span>)).<span class="title function_">ok</span>();</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šä¿¡æ¯å¯ä»¥æŸ¥é˜…<a target="_blank" rel="noopener" href="https://devexpress.github.io/testcafe/documentation/test-api/selecting-page-elements/dom-node-state.html">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h3 id="mock-è¯·æ±‚"><a href="#mock-è¯·æ±‚" class="headerlink" title="mock è¯·æ±‚"></a>mock è¯·æ±‚</h3><p>Web è‡ªåŠ¨åŒ–æµ‹è¯•å¦‚æœæ˜¯åœ¨é›†æˆæµ‹è¯•ç¯å¢ƒè¿è¡Œçš„è¯ï¼Œæµ‹è¯•è¡Œä¸ºå¯èƒ½ä¼šå½±å“åˆ°è¿™ä¸ªç¯å¢ƒçš„æ•°æ®ï¼Œå¦‚æœä½ ä¸æƒ³â€œæ±¡æŸ“â€ç¯å¢ƒä¸Šçš„æ•°æ®çš„è¯ï¼Œå¯ä»¥é€šè¿‡ mock çš„æ–¹å¼æ¥æ¨¡æ‹ŸæœåŠ¡ç«¯çš„è¯·æ±‚ï¼Œä»è€Œè¾¾åˆ°éš”ç¦»æœåŠ¡ç«¯ç¯å¢ƒçš„ç›®çš„ã€‚</p>
<p>TestCafe æä¾›äº† mock æœåŠ¡ç«¯çš„ APIï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™äº› API æ¥å®ç° mock æœåŠ¡ç«¯ API çš„åŠŸèƒ½ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡ä»£ç ç¤ºä¾‹æ¥äº†è§£ä¸€ä¸‹ mock API å¦‚ä½•ä½¿ç”¨ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ mock è¯·æ±‚çš„ API</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">RequestMock</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;testcafe&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// mock è¯·æ±‚è¿”å›çš„æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> mockData = [</span><br><span class="line">  &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&#x27;Foo&#x27;</span>,</span><br><span class="line">	<span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="comment">// mock è¯·æ±‚</span></span><br><span class="line"><span class="keyword">const</span> mock = <span class="title class_">RequestMock</span>()</span><br><span class="line">  .<span class="title function_">onRequestTo</span>(&#123;</span><br><span class="line">	<span class="comment">// å‡è®¾æœåŠ¡ç«¯æ¥å£æ˜¯ http://server.com/api/user</span></span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;http://server.com/api/user&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    <span class="attr">isAjax</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">respond</span>(&#123; <span class="attr">data</span>: mockData &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡ hooks æ–¹æ³•åœ¨æµ‹è¯•é›†ä¸­é›†æˆ mock æœåŠ¡</span></span><br><span class="line">fixture<span class="string">`Getting Started`</span>.<span class="property">page</span><span class="string">`http://localhost:3000/`</span>.<span class="title function_">requestHooks</span>(mock);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å½“æµ‹è¯•è¿è¡Œèµ·æ¥åï¼Œè¿™ä¸ªæµ‹è¯•é›†æ‰§è¡Œçš„æµ‹è¯•å°±ä¸ä¼šå»çœŸæ­£çš„æœåŠ¡ç«¯è¯·æ±‚æ•°æ®ï¼Œè€Œæ˜¯ä¼šèµ° mock API ç„¶åç”¨ mock æ•°æ®æ¥æ¸²æŸ“é¡µé¢ï¼Œæµ‹è¯•æ‰§è¡Œå®Œæˆåå¯¹æœåŠ¡ç«¯çš„æ•°æ®ä¸ä¼šäº§ç”Ÿä»»ä½•å½±å“ã€‚</p>
<h2 id="ç«å“å¯¹æ¯”"><a href="#ç«å“å¯¹æ¯”" class="headerlink" title="ç«å“å¯¹æ¯”"></a>ç«å“å¯¹æ¯”</h2><p>Web è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·æœ‰å¾ˆå¤šï¼Œåƒè€ç‰Œçš„<code>selenium</code>å’Œ<code>Rebot</code>ï¼Œè¿˜æœ‰åæ¥è€…<code>Nightwatch</code>å’Œ<code>Cypress</code>ç­‰ã€‚å…¶ä¸­ <a target="_blank" rel="noopener" href="https://www.cypress.io/">Cypress</a> å’Œ TestCafe åŠŸèƒ½æ¯”è¾ƒç±»ä¼¼ï¼Œå®ƒä»¬æ˜¯ç›´é¢ç«äº‰è€…ï¼Œä½† TestCafe çš„ä¼˜åŠ¿æ˜¯æ”¯æŒçš„æµè§ˆå™¨ç§ç±»æ¯”è¾ƒå¤šï¼Œæ”¯æŒé™¤äº† Chrome ä¹‹å¤–çš„å…¶ä»–æµè§ˆå™¨ç”šè‡³åŒ…æ‹¬ IEã€‚</p>
<p>TestCafe æ”¯æŒçš„æµè§ˆå™¨æœ‰ä¸‹é¢è¿™äº›ï¼Œæ›´å¤šèµ„æ–™å¯ä»¥æŸ¥é˜…<a target="_blank" rel="noopener" href="https://devexpress.github.io/testcafe/documentation/using-testcafe/common-concepts/browsers/browser-support.html">è¿™é‡Œ</a>ï¼š</p>
<table>
<thead>
<tr>
<th align="center">æµè§ˆå™¨</th>
<th align="center">åˆ«å</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Chromium</td>
<td align="center">chromium</td>
</tr>
<tr>
<td align="center">Google Chrome</td>
<td align="center">chrome</td>
</tr>
<tr>
<td align="center">Google Chrome Canary</td>
<td align="center">chrome-canary</td>
</tr>
<tr>
<td align="center">Internet Explorer</td>
<td align="center">ie</td>
</tr>
<tr>
<td align="center">Microsoft Edge</td>
<td align="center">edge</td>
</tr>
<tr>
<td align="center">Mozilla Firefox</td>
<td align="center">firefox</td>
</tr>
<tr>
<td align="center">Opera</td>
<td align="center">opera</td>
</tr>
<tr>
<td align="center">Safari</td>
<td align="center">safari</td>
</tr>
</tbody></table>
<p>ä¹Ÿå¯ä»¥æŸ¥çœ‹ä»¥ä¸‹æ–‡ç« æ¥äº†è§£ TestCafe å’Œå…¶ä»–è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶çš„å¯¹æ¯”ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://medium.com/welldone-software/an-overview-of-javascript-testing-in-2018-f68950900bc3">An Overview of JavaScript Testing in 2018</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.com/yld-engineering-blog/evaluating-cypress-and-testcafe-for-end-to-end-testing-fcd0303d2103">Evaluating Cypress and TestCafe for end to end testing</a></li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Web è‡ªåŠ¨åŒ–æµ‹è¯•ä½äºæµ‹è¯•é‡‘å­—å¡”çš„é¡¶ç«¯ï¼Œæ˜¯å¼€å‘å’Œç»´æŠ¤æˆæœ¬è¾ƒé«˜çš„ä¸€ç§æµ‹è¯•ï¼Œæ‰€ä»¥è‡ªåŠ¨åŒ–æµ‹è¯•è´µç²¾ä¸è´µå¤šï¼Œå¯ä»¥ç”¨å®ƒæ¥æµ‹è¯•é¡¹ç›®çš„æ ¸å¿ƒæµç¨‹ï¼Œä½†æ²¡å¿…è¦æ¶µç›–æ‰€æœ‰ç»†èŠ‚ï¼Œè¿™æ ·å¯ä»¥è®©è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ€§ä»·æ¯”æœ€é«˜ã€‚å¸Œæœ›å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•æ„Ÿå…´è¶£çš„åŒå­¦ç•™è¨€äº¤æµè®¨è®ºï¼Œè°¢è°¢ã€‚</p>
</div>

</article>
<section id="appreciates">
  <center>
	<h2>èµèµ</h2>
    <div class="post-footer">
      <div>
	    <h4>å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œå¯ä»¥æèµ æˆ‘å–æ¯å’–å•¡ğŸ˜Œï¼Œæèµ æ–¹å¼ï¼š</h4>
        <div class="digital-wallet">
          <h6>BTC åœ°å€ï¼š3LYgSyf7ddMALwGWPQr3PY4wzjsTDdg1oV</h6>
          <h6>ETH åœ°å€ï¼š0x0C9b27c89A61aadb0aEC24CA8949910Cbf77Aa73</h6>
        </div>
        <div class="wechat_appreciates">
          <img src="/images/wechat_appreciates.png" alt="qrcode" width="250" >
        </div>
      </div>
      <div>
	    <h4>æ–‡ç« å·²åŒæ­¥æ›´æ–°å…¬ä¼—å·ï¼Œæ¬¢è¿å…³æ³¨</h4>
        <div class="wechat_appreciates">
          <img src="/images/wxgzh_qrcode.jpg" alt="qrcode" width="250" >
        </div>
      </div>
    </div>
  </center>
</section>



    
      <script type="text/javascript">
        var disqus_config = function () {
            this.page.url = 'https://zhaozhiming.github.io/2019/01/28/hello-testcafe/';
            this.page.identifier = 'https://zhaozhiming.github.io/2019/01/28/hello-testcafe/';
        };

        (function() {
          var d = document, s = d.createElement('script');
          s.src = '//zhaozhiming.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>

</div>

    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2024

    èµµèŠæ˜
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a target="_blank" rel="noopener" href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a target="_blank" rel="noopener" href="http://github.com/panks/fabric">fabric</a> by <a target="_blank" rel="noopener" href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5608723650603289" crossorigin="anonymous"></script>
</body>
</html>
