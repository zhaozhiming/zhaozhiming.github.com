<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>å¦‚ä½•åœ¨ Ubuntu 22 ä¸Šå®‰è£… CUDAã€NVIDIA æ˜¾å¡é©±åŠ¨ä»¥åŠ PyTorch - Hacker and Geeker&#39;s Way</title>
    <meta name="author" content="">
    
	<meta name="description" content="å¦‚ä½•åœ¨ Ubuntu 22 ä¸Šå®‰è£… CUDAã€NVIDIA æ˜¾å¡é©±åŠ¨ä»¥åŠ PyTorch"> <!-- TODO: truncate -->
	<meta name="keywords" content="cuda, nvidia driver, pytorch">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="Hacker and Geeker&#39;s Way" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='/stylesheets/font.css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/font.css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/font.css?family=Amethysta+One' rel='stylesheet' type='text/css'>
	  <script src="/javascripts/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-100485541-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


<meta name="generator" content="Hexo 6.3.0"></head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        Hacker and Geeker&#39;s Way
    </div>
</h1>
<span class="subtitle"></span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a target="_blank" rel="noopener" href="https://github.com/zhaozhiming" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a target="_blank" rel="noopener" href="http://www.twitter.com/kingzzm" class="twitter" title="Twitter"></a>
  </li>
  
  
  <!-- LinkedIn -->
  <li>
  <a target="_blank" rel="noopener" href="http://www.linkedin.com/in/zhaozhiming" class="linkedin" title="LinkedIn"></a>
  </li>
  
  
  
  
  
  <!-- Stackoverflow -->
  <li>
  <a target="_blank" rel="noopener" href="http://stackoverflow.com/users/1954315/zhaozhiming" class="stackoverflow" title="Stackoverflow"></a>
  </li>
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    <li><a href="/about/index.html">About</a></li>
    
    <li>
    <div id="dark">
        <form action="//www.google.com.hk/search" method="get" accept-charset="UTF-8" id="search">
            <input type="hidden" name="sitesearch" value="https://zhaozhiming.github.io" />
            <input type="text" name="q" results="0" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>


<div id="toload">
<!-- begin toload -->
    <div id="content">
        <div class="inner">
<article class="post">
	<h2 class="title">å¦‚ä½•åœ¨ Ubuntu 22 ä¸Šå®‰è£… CUDAã€NVIDIA æ˜¾å¡é©±åŠ¨ä»¥åŠ PyTorch</h2>
    <div class="meta">
        <div class="date">Published on: <time datetime="2023-08-12T03:07:05.000Z" itemprop="datePublished">8æœˆ 12, 2023</time>
</div>
        <div class="tags">Tags: 

<a href="/tags/cuda/">cuda</a> <a href="/tags/nvidia-driver/">nvidia driver</a> <a href="/tags/pytorch/">pytorch</a>
</div>
    </div>
	<div class="entry-content"><img src="/images/post/2023/08/ubuntu-cuda.png" class="" width="400" height="300">

<p>è™½ç„¶ç°åœ¨æœ‰å¾ˆå¤šäº‘å‚å•†éƒ½æä¾›äº† GPU æœåŠ¡å™¨ï¼Œä½†ç”±äº GPU çš„èµ„æºç¨€ç¼ºï¼Œäº‘ GPU æœåŠ¡å™¨è¦ä¹ˆå°±æ˜¯ä»·æ ¼å±…é«˜ä¸ä¸‹ï¼Œè¦ä¹ˆå°±æ˜¯æ•°é‡ä¸è¶³æ— æ³•è´­ä¹°ã€‚å› æ­¤èƒ½æ‹¥æœ‰ä¸€å—å±äºè‡ªå·±çš„ NVIDIA æ˜¾å¡æ¥è·‘ AI ç¨‹åºæ˜¯æœ€å¥½ä¸è¿‡äº†ï¼Œè™½ç„¶ç°åœ¨é«˜ç«¯çš„ NVIDIA æ˜¾å¡åˆè´µåˆä¸å¥½ä¹°ï¼Œä½†æ˜¯ç¨å¾®ä½ç«¯çš„æ˜¾å¡è¿˜æ˜¯å¥½å…¥æ‰‹çš„ï¼Œéšç€å¤§æ¨¡å‹çš„é…ç½®è¦æ±‚è¶Šæ¥è¶Šä½ï¼Œåœ¨ä½ç«¯æ˜¾å¡ä¸Šè·‘ä¸€äº›å¤§æ¨¡å‹ä¹Ÿä¸æ˜¯ä»€ä¹ˆé—®é¢˜ã€‚ä¸è¿‡å³ä½¿ä½ æ‹¥æœ‰äº†ä¸€å—è‡ªå·±çš„ NVIDIA æ˜¾å¡ï¼Œä½†ç¯å¢ƒé…ç½®ä¹Ÿæ˜¯ä¸€ä¸ªéº»çƒ¦çš„é—®é¢˜ï¼Œä»Šå¤©å°±æ¥åˆ†äº«ä¸€ä¸‹å¦‚ä½•åœ¨ Ubuntu 22 ä¸Šå®‰è£… CUDAã€NVIDIA æ˜¾å¡é©±åŠ¨ä»¥åŠ PyTorchã€‚</p>
<span id="more"></span>

<h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åœ¨ç³»ç»Ÿä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¹¶è¿”å›æ­£ç¡®çš„æ‰§è¡Œç»“æœï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼š</p>
<ul>
<li><code>nvcc --version</code>: æ˜¾ç¤º CUDA ç‰ˆæœ¬</li>
<li><code>nvidia-smi</code>: æ˜¾ç¤º NVIDIA æ˜¾å¡ä¿¡æ¯</li>
<li>python -c â€œimport torch; print(torch.cuda.is_available())â€: æ˜¾ç¤º PyTorch æ˜¯å¦å¯ç”¨</li>
</ul>
<img src="/images/post/2023/08/nvidia-target.png" class="" width="1000" height="600">

<p>åªè¦è¿™äº›å‘½ä»¤æ‰§è¡Œæ­£å¸¸ï¼Œé‚£å°±è¯æ˜æˆ‘ä»¬çš„ AI ç¯å¢ƒæ­å»ºæˆåŠŸäº†ã€‚</p>
<h2 id="é¢„å®‰è£…å·¥ä½œ"><a href="#é¢„å®‰è£…å·¥ä½œ" class="headerlink" title="é¢„å®‰è£…å·¥ä½œ"></a>é¢„å®‰è£…å·¥ä½œ</h2><p>å¦‚æœä½ ä¹‹å‰æœ‰å®‰è£…è¿‡ NVIDIA é©±åŠ¨æˆ–è€… CUDA ç¨‹åºçš„è¯ï¼Œé‚£ä¹ˆåœ¨å®‰è£…ä¹‹å‰éœ€è¦å…ˆå¸è½½ä¹‹å‰çš„é©±åŠ¨å’Œ CUDA ç¨‹åºï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´å®‰è£…å¤±è´¥ã€‚å¸è½½å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt autoremove nvidia* --purge</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ ä¹‹å‰æ˜¯ä½¿ç”¨ NVIDIA å®˜æ–¹æä¾›çš„<code>run</code>æ–‡ä»¶å®‰è£…çš„é©±åŠ¨å’Œ CUDA ç¨‹åºçš„è¯ï¼Œè¿˜éœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®Œæ•´å¸è½½ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> /usr/bin/nvidia-uninstall</span><br><span class="line"><span class="comment"># æ³¨æ„å°†ä¸‹é¢çš„Xå’ŒYæ›¿æ¢æˆä½ çš„ CUDA ç‰ˆæœ¬</span></span><br><span class="line"><span class="built_in">sudo</span> /usr/local/cuda-X.Y/bin/cuda-uninstall</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œå®Œä»¥ä¸Šå‘½ä»¤åï¼Œä½ çš„ç³»ç»Ÿå°±å˜æˆäº†ä¸€ä¸ªâ€å¹²å‡€â€çš„ç³»ç»Ÿï¼Œå¯ä»¥å¼€å§‹å®‰è£…äº†ã€‚</p>
<h2 id="å®‰è£…-CUDA"><a href="#å®‰è£…-CUDA" class="headerlink" title="å®‰è£… CUDA"></a>å®‰è£… CUDA</h2><p>CUDAï¼ˆCompute Unified Device Architectureï¼‰æ˜¯ NVIDIA æ¨å‡ºçš„å¹¶è¡Œè®¡ç®—å¹³å°å’Œç¼–ç¨‹æ¨¡å‹ã€‚å®ƒå…è®¸å¼€å‘è€…åˆ©ç”¨ NVIDIA çš„ GPU æ¥è¿›è¡Œé«˜æ•ˆçš„å¹¶è¡Œè®¡ç®—ã€‚CUDA ä¸ºå„ç§åº”ç”¨ç¨‹åºæä¾›äº†ç®€åŒ–çš„ API å’Œå·¥å…·ï¼Œä»è€Œåœ¨ GPU ä¸ŠåŠ é€Ÿè®¡ç®—å¯†é›†å‹ä»»åŠ¡ï¼Œå¦‚æœºå™¨å­¦ä¹ ã€ç§‘å­¦æ¨¡æ‹Ÿå’Œå›¾å½¢å¤„ç†ã€‚</p>
<p>é¦–å…ˆè¿›å…¥<a target="_blank" rel="noopener" href="https://developer.nvidia.com/cuda-toolkit-archive">NVIDIA CUDA ç‰ˆæœ¬åˆ—è¡¨é¡µé¢</a>ï¼Œæ‰¾åˆ°ä½ éœ€è¦çš„ CUDA ç‰ˆæœ¬ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿæ˜¯ Ubuntu22.04ï¼ŒCUDA æœ€æ—©æ”¯æŒ Ubuntu22 çš„ç‰ˆæœ¬æ˜¯ 11.7ï¼Œå› æ­¤æˆ‘ä»¬é€‰æ‹© CUDA Toolkit 11.7.1 ç‰ˆæœ¬ï¼Œä¸ªäººä¸å»ºè®®é€‰æ‹©å¤ªæ–°çš„ç‰ˆæœ¬ï¼ˆæ¯”å¦‚ 12.x çš„ç‰ˆæœ¬ï¼‰ï¼Œå› ä¸ºæ–°ç‰ˆæœ¬çš„ CUDA å¯èƒ½ä¼šæœ‰å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<p>è¿›å…¥è¯¥ç‰ˆæœ¬çš„ä¸‹è½½é¡µé¢ï¼Œé€‰æ‹©å¯¹åº”çš„æ“ä½œç³»ç»Ÿã€æ¶æ„ã€æ“ä½œç³»ç»Ÿã€ç‰ˆæœ¬ï¼Œå®‰è£…æ–¹å¼ï¼Œå°±å¯ä»¥çœ‹åˆ°ç›¸åº”çš„å®‰è£…å‘½ä»¤ã€‚</p>
<img src="/images/post/2023/08/cuda-install.png" class="" width="1000" height="600">

<p>æ³¨æ„ä¸Šå›¾ä¸­æœ€åä¸€æ­¥å‘½ä»¤ï¼Œ<strong>ä¸è¦æ‰§è¡Œ<code>sudo apt-get -y install cuda</code>å‘½ä»¤</strong>ï¼Œä¸ç„¶ä¼šå®‰è£…æœ€æ–°çš„ CUDAï¼ˆ12.x çš„ç‰ˆæœ¬ï¼‰ï¼Œæˆ‘ä»¬æ˜¯è¦å®‰è£… CUDA 11.7ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/cuda-keyring_1.0-1_all.deb</span><br><span class="line"><span class="built_in">sudo</span> dpkg -i cuda-keyring*.deb</span><br><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get -y install cuda-11-7</span><br></pre></td></tr></table></figure>

<p>å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ç»ˆç«¯ä¸­ç›´æ¥ä½¿ç”¨<code>nvcc</code>å‘½ä»¤äº†ï¼Œå‘½ä»¤æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ nvcc --version</span><br><span class="line"></span><br><span class="line">nvcc: NVIDIA (R) Cuda compiler driver</span><br><span class="line">Copyright (c) 2005-2022 NVIDIA Corporation</span><br><span class="line">Built on Wed_Jun__8_16:49:14_PDT_2022</span><br><span class="line">Cuda compilation tools, release 11.7, V11.7.99</span><br><span class="line">Build cuda_11.7.r11.7/compiler.31442593_0</span><br></pre></td></tr></table></figure>

<h2 id="å®‰è£…é©±åŠ¨"><a href="#å®‰è£…é©±åŠ¨" class="headerlink" title="å®‰è£…é©±åŠ¨"></a>å®‰è£…é©±åŠ¨</h2><p>å®‰è£…å®Œ CUDA åï¼Œæˆ‘ä»¬ç»§ç»­å®‰è£… NVIDIA æ˜¾å¡é©±åŠ¨ç¨‹åºã€‚</p>
<p>NVIDIA æ˜¾å¡é©±åŠ¨æ˜¯ä¸€å¥—è½¯ä»¶ç¨‹åºï¼Œç”¨äºä½¿æ“ä½œç³»ç»Ÿå’Œè®¡ç®—æœºç¡¬ä»¶ä¸ NVIDIA å›¾å½¢å¡è¿›è¡Œé€šä¿¡ã€‚å®ƒèƒ½ä¼˜åŒ–æ˜¾å¡çš„æ€§èƒ½ï¼Œæ”¯æŒæ–°æ¸¸æˆçš„å›¾å½¢è¦æ±‚ï¼ŒåŒæ—¶ä¿®å¤å·²çŸ¥çš„é”™è¯¯å’Œå…¼å®¹æ€§é—®é¢˜ã€‚å®šæœŸæ›´æ–°é©±åŠ¨å¯ä»¥ç¡®ä¿æ˜¾å¡çš„æœ€ä½³æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</p>
<p>é¦–å…ˆæ£€æŸ¥ä¸‹æ˜¾å¡çš„ä¿¡æ¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ lspci | grep -i nvidia</span><br><span class="line"></span><br><span class="line">03:00.0 VGA compatible controller: NVIDIA Corporation GM200GL [Quadro M6000] (rev a1)</span><br><span class="line">03:00.1 Audio device: NVIDIA Corporation GM200 High Definition Audio (rev a1)</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°è¿™å°æœºå™¨çš„æ˜¾å¡å‹å·æ˜¯ NVIDIA Quadro M6000 ï¼Œç„¶åæˆ‘ä»¬å†çœ‹æ“ä½œç³»ç»Ÿæ¨èå®‰è£…çš„æ˜¾å¡é©±åŠ¨æ˜¯ä»€ä¹ˆï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ ubuntu-drivers devices</span><br><span class="line"></span><br><span class="line">== /sys/devices/pci0000:00/0000:00:02.0/0000:03:00.0 ==</span><br><span class="line">modalias : pci:v000010DEd000017F0sv000010DEsd00001129bc03sc00i00</span><br><span class="line">vendor   : NVIDIA Corporation</span><br><span class="line">model    : GM200GL [Quadro M6000]</span><br><span class="line">driver   : nvidia-driver-418-server - distro non-free</span><br><span class="line">driver   : nvidia-driver-525 - third-party non-free</span><br><span class="line">driver   : nvidia-driver-390 - distro non-free</span><br><span class="line">driver   : nvidia-driver-520 - third-party non-free</span><br><span class="line">driver   : nvidia-driver-535 - third-party non-free</span><br><span class="line">driver   : nvidia-driver-530 - third-party non-free</span><br><span class="line">driver   : nvidia-driver-470-server - distro non-free</span><br><span class="line">driver   : nvidia-driver-525-server - distro non-free</span><br><span class="line">driver   : nvidia-driver-515 - third-party non-free</span><br><span class="line">driver   : nvidia-driver-535-server - distro non-free</span><br><span class="line">driver   : nvidia-driver-450-server - distro non-free</span><br><span class="line">driver   : nvidia-driver-470 - distro non-free recommended <span class="comment"># è¿™ä¸ªå°±æ˜¯æ¨èçš„é©±åŠ¨</span></span><br><span class="line">driver   : xserver-xorg-video-nouveau - distro free <span class="built_in">builtin</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ç³»ç»Ÿæ¨èå®‰è£…çš„é©±åŠ¨æ˜¯ <code>nvidia-driver-470</code>ï¼Œç„¶åæˆ‘ä»¬å†é€šè¿‡å¦‚ä¸‹å‘½ä»¤å®‰è£…æ˜¾å¡é©±åŠ¨ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install nvidia-driver-470</span><br></pre></td></tr></table></figure>

<p>å®‰è£…å®Œé©±åŠ¨ç¨‹åºåéœ€è¦é‡å¯ç³»ç»Ÿï¼Œæ‰§è¡Œå‘½ä»¤<code>sudo reboot</code>é‡å¯ç³»ç»Ÿï¼Œé‡å¯å®Œæˆåå†æ‰§è¡Œ<code>nvidia-smi</code>æŸ¥çœ‹æ˜¾å¡è¯¦ç»†ä¿¡æ¯ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ nvidia-smi</span><br><span class="line"></span><br><span class="line">+-----------------------------------------------------------------------------+</span><br><span class="line">| NVIDIA-SMI 470.199.02   Driver Version: 470.199.02   CUDA Version: 11.4     |</span><br><span class="line">|-------------------------------+----------------------+----------------------+</span><br><span class="line">| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |</span><br><span class="line">| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |</span><br><span class="line">|                               |                      |               MIG M. |</span><br><span class="line">|===============================+======================+======================|</span><br><span class="line">|   0  Quadro M6000        Off  | 00000000:03:00.0 Off |                  Off |</span><br><span class="line">| 28%   41C    P8    13W / 250W |     15MiB / 12210MiB |      0%      Default |</span><br><span class="line">|                               |                      |                  N/A |</span><br><span class="line">+-------------------------------+----------------------+----------------------+</span><br><span class="line"></span><br><span class="line">+-----------------------------------------------------------------------------+</span><br><span class="line">| Processes:                                                                  |</span><br><span class="line">|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |</span><br><span class="line">|        ID   ID                                                   Usage      |</span><br><span class="line">|=============================================================================|</span><br><span class="line">|    0   N/A  N/A       975      G   /usr/lib/xorg/Xorg                  9MiB |</span><br><span class="line">|    0   N/A  N/A      1164      G   /usr/bin/gnome-shell                2MiB |</span><br><span class="line">+-----------------------------------------------------------------------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="å®‰è£…-PyTorch"><a href="#å®‰è£…-PyTorch" class="headerlink" title="å®‰è£… PyTorch"></a>å®‰è£… PyTorch</h2><p>æˆ‘ä»¬çš„ç›®æ ‡å·²ç»å®Œæˆäº†ä¸‰åˆ†ä¹‹äºŒäº†ï¼Œæœ€åæˆ‘ä»¬å†æ¥çœ‹å¦‚ä½•å®‰è£… PyTorchã€‚</p>
<p>PyTorch æ˜¯ä¸€ä¸ªå¼€æºçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œç”± Facebook çš„ AI ç ”ç©¶ç»„å¼€å‘ã€‚å®ƒæä¾›äº†çµæ´»çš„å¼ é‡è®¡ç®—å·¥å…·ï¼Œæ”¯æŒ GPU åŠ é€Ÿï¼Œå¹¶å…·æœ‰åŠ¨æ€è®¡ç®—å›¾ç‰¹æ€§ï¼Œä½¿å…¶åœ¨ç ”ç©¶å’ŒåŸå‹è®¾è®¡ä¸­å—åˆ°é’çã€‚PyTorch ä¸ä»…æ”¯æŒç¥ç»ç½‘ç»œå»ºæ¨¡ï¼Œè¿˜æä¾›å¹¿æ³›çš„ API å’Œåº“ï¼Œé€‚ç”¨äºæœºå™¨å­¦ä¹ ã€è®¡ç®—æœºè§†è§‰å’Œè‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ã€‚</p>
<p>å®‰è£… PyTorch å¯ä»¥ä½¿ç”¨ Pip å®‰è£…ï¼Œä½†æ¨èå…ˆä½¿ç”¨ Conda æ¥è¿›è¡Œ Python ç¯å¢ƒç®¡ç†ï¼ŒConda æ˜¯ä¸€ä¸ªå¼€æºçš„åŒ…ç®¡ç†å’Œç¯å¢ƒç®¡ç†ç³»ç»Ÿï¼Œä¸»è¦ç”¨äºå®‰è£…å„ç§è½¯ä»¶åŒ…å’Œä¾èµ–ï¼Œä»¥åŠåˆ›å»ºã€ä¿å­˜å’Œåˆ‡æ¢å¤šä¸ªç¯å¢ƒã€‚å®ƒæ”¯æŒå¤šç§è¯­è¨€ï¼Œå°¤å…¶æ˜¯ Pythonã€‚Conda çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºå…¶èƒ½å¤Ÿè§£å†³åº“ä¸ä¾èµ–é¡¹ä¹‹é—´çš„å…¼å®¹æ€§é—®é¢˜ï¼Œå¹¶å…è®¸ç”¨æˆ·è½»æ¾åœ°åˆ›å»ºéš”ç¦»çš„å¼€å‘æˆ–è¿è¡Œç¯å¢ƒï¼Œé¿å…è½¯ä»¶å†²çªã€‚Conda çš„å®‰è£…å¯ä»¥çœ‹<a target="_blank" rel="noopener" href="https://conda.io/projects/conda/en/latest/user-guide/install/index.html">è¿™é‡Œ</a>ï¼Œé€‰æ‹© Miniconda å°±å¯ä»¥äº†ã€‚</p>
<p>å®‰è£…å®Œ Conda åï¼Œæˆ‘ä»¬è¿›å…¥<a target="_blank" rel="noopener" href="https://pytorch.org/">PyTorch çš„é¡µé¢</a>ï¼Œåœ¨<code>INSTALL PYTORCH</code>ç« èŠ‚é€‰æ‹© PyTorch ç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿã€å®‰è£…æ–¹å¼ã€ç¼–ç¨‹è¯­è¨€ã€CUDA ç‰ˆæœ¬ï¼Œç„¶åå°±å¯ä»¥çœ‹åˆ° PyTorch çš„å®‰è£…å‘½ä»¤äº†ã€‚</p>
<img src="/images/post/2023/08/pytorch-install.png" class="" width="1000" height="600">

<p>å®‰è£…å®Œåæ‰§è¡Œå‘½ä»¤æ˜¾ç¤º PyTorch æ˜¯å¦å¯ç”¨ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ python -c <span class="string">&quot;import torch; print(torch.cuda.is_available())&quot;</span></span><br><span class="line">True</span><br></pre></td></tr></table></figure>

<p>æœ‰æ—¶å€™æˆ‘ä»¬å®‰è£…äº† CUDA å’Œ PyTorch åï¼Œæ‰§è¡Œä»¥ä¸Šå‘½ä»¤ä»æ˜¾ç¤º<code>Flase</code>ï¼ˆä¸å¯ç”¨ï¼‰ï¼Œç³»ç»Ÿä¼šæç¤º<code>Torch not compiled with CUDA</code>çš„é”™è¯¯ï¼Œè¿™æ˜¯å› ä¸º CUDA å’Œ PyTorch çš„ç‰ˆæœ¬ä¸å…¼å®¹å¯¼è‡´çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ CUDA å’Œ PyTorch çš„ç‰ˆæœ¬ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ nvcc --version <span class="comment"># æŸ¥çœ‹ CUDA ç‰ˆæœ¬</span></span><br><span class="line">...</span><br><span class="line">Build cuda_11.7.r11.7/compiler.31442593_0</span><br><span class="line">$ python -c <span class="string">&quot;import torch; print(torch.__version__)&quot;</span> <span class="comment"># æŸ¥çœ‹ PyTorch ç‰ˆæœ¬</span></span><br><span class="line">2.0.1+cu117</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ CUDA å’Œ PyTorch çš„ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦é‡æ–°å®‰è£… PyTorchï¼Œéœ€è¦å…ˆå¸è½½è€çš„ PyTorch ç‰ˆæœ¬ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip uninstall torch torchvision torchaudio</span><br></pre></td></tr></table></figure>

<p>å¸è½½å®Œæˆåï¼Œé‡æ–°æŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•å®‰è£… PyTorch å³å¯ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åˆšæ¥è§¦ AI ç¯å¢ƒéƒ¨ç½²æ—¶ï¼Œå¯èƒ½å¾ˆå¤šäººå¯¹è¿™äº›æ¦‚å¿µä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œæ¯”å¦‚ CUDAã€NVIDIA é©±åŠ¨ã€PyTorch ç­‰ï¼Œåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­å¯èƒ½ä¹Ÿä¼šé‡åˆ°è¯¸å¤šé—®é¢˜ï¼Œä½†åªè¦æ…¢æ…¢äº†è§£è¿™äº›æ¦‚å¿µï¼ŒåŒæ—¶å¤šéƒ¨ç½²å‡ æ¬¡ï¼Œå°±ä¼šç†Ÿæ‚‰å…¶ä¸­çš„æ“ä½œï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« å¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿçš„ç†Ÿæ‚‰ AI ç¯å¢ƒçš„éƒ¨ç½²ï¼Œå¦‚æœä½ æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚</p>
<p>å…³æ³¨æˆ‘ï¼Œä¸€èµ·å­¦ä¹ å„ç§äººå·¥æ™ºèƒ½å’Œ AIGC æ–°æŠ€æœ¯ï¼Œæ¬¢è¿äº¤æµï¼Œå¦‚æœä½ æœ‰ä»€ä¹ˆæƒ³é—®æƒ³è¯´çš„ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.linuxcapable.com/install-nvidia-drivers-on-ubuntu-linux/">How to Install NVIDIA Drivers on Ubuntu 22.04 | 20.04</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.com/analytics-vidhya/installing-any-version-of-cuda-on-ubuntu-and-using-tensorflow-and-torch-on-gpu-b1a954500786">Installing any version of CUDA on Ubuntu and using Tensorflow and Torch on GPU</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/56431461/how-to-remove-cuda-completely-from-ubuntu">How to remove cuda completely from ubuntu?</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/62250491/nvml-driver-library-mismatch-after-libnvidia-compute-update">NVML driver&#x2F;library mismatch after libnvidia-compute update</a></li>
</ul>
</div>

</article>
<section id="appreciates">
  <center>
	<h2>èµèµ</h2>
    <div class="post-footer">
      <div>
	    <h4>å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œå¯ä»¥æèµ æˆ‘å–æ¯å’–å•¡ğŸ˜Œï¼Œæèµ æ–¹å¼ï¼š</h4>
        <div class="digital-wallet">
          <h6>BTC åœ°å€ï¼š3LYgSyf7ddMALwGWPQr3PY4wzjsTDdg1oV</h6>
          <h6>ETH åœ°å€ï¼š0x0C9b27c89A61aadb0aEC24CA8949910Cbf77Aa73</h6>
        </div>
        <div class="wechat_appreciates">
          <img src="/images/wechat_appreciates.png" alt="qrcode" width="250" >
        </div>
      </div>
      <div>
	    <h4>æ–‡ç« å·²åŒæ­¥æ›´æ–°å…¬ä¼—å·ï¼Œæ¬¢è¿å…³æ³¨</h4>
        <div class="wechat_appreciates">
          <img src="/images/wxgzh_qrcode.jpg" alt="qrcode" width="250" >
        </div>
      </div>
    </div>
  </center>
</section>



    
      <script type="text/javascript">
        var disqus_config = function () {
            this.page.url = 'https://zhaozhiming.github.io/2023/08/12/ubuntu22-install-cuda-and-nvidia-driver-and-pytorch/';
            this.page.identifier = 'https://zhaozhiming.github.io/2023/08/12/ubuntu22-install-cuda-and-nvidia-driver-and-pytorch/';
        };

        (function() {
          var d = document, s = d.createElement('script');
          s.src = '//zhaozhiming.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>

</div>

    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2025

    èµµèŠæ˜
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a target="_blank" rel="noopener" href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a target="_blank" rel="noopener" href="http://github.com/panks/fabric">fabric</a> by <a target="_blank" rel="noopener" href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5608723650603289" crossorigin="anonymous"></script>
</body>
</html>
