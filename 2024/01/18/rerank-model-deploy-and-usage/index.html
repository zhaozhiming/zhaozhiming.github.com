<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>Rerank æ¨¡å‹çš„éƒ¨ç½²åŠä½¿ç”¨ - Hacker and Geeker&#39;s Way</title>
    <meta name="author" content="">
    
	<meta name="description" content="ä»‹ç»ä½¿ç”¨ TEI éƒ¨ç½² Rerank æ¨¡å‹ä»¥åŠä½¿ç”¨LlamaIndex è¿›è¡Œ Rerank æ£€ç´¢"> <!-- TODO: truncate -->
	<meta name="keywords" content="rerank, llamaindex, text-embedding-inherence">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="Hacker and Geeker&#39;s Way" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='/stylesheets/font.css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/font.css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/font.css?family=Amethysta+One' rel='stylesheet' type='text/css'>
	  <script src="/javascripts/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-100485541-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


<meta name="generator" content="Hexo 6.3.0"></head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        Hacker and Geeker&#39;s Way
    </div>
</h1>
<span class="subtitle"></span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a target="_blank" rel="noopener" href="https://github.com/zhaozhiming" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a target="_blank" rel="noopener" href="http://www.twitter.com/kingzzm" class="twitter" title="Twitter"></a>
  </li>
  
  
  <!-- LinkedIn -->
  <li>
  <a target="_blank" rel="noopener" href="http://www.linkedin.com/in/zhaozhiming" class="linkedin" title="LinkedIn"></a>
  </li>
  
  
  
  
  
  <!-- Stackoverflow -->
  <li>
  <a target="_blank" rel="noopener" href="http://stackoverflow.com/users/1954315/zhaozhiming" class="stackoverflow" title="Stackoverflow"></a>
  </li>
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    <li><a href="/about/index.html">About</a></li>
    
    <li>
    <div id="dark">
        <form action="//www.google.com.hk/search" method="get" accept-charset="UTF-8" id="search">
            <input type="hidden" name="sitesearch" value="https://zhaozhiming.github.io" />
            <input type="text" name="q" results="0" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>


<div id="toload">
<!-- begin toload -->
    <div id="content">
        <div class="inner">
<article class="post">
	<h2 class="title">Rerank æ¨¡å‹çš„éƒ¨ç½²åŠä½¿ç”¨</h2>
    <div class="meta">
        <div class="date">Published on: <time datetime="2024-01-18T03:55:56.000Z" itemprop="datePublished">1æœˆ 18, 2024</time>
</div>
        <div class="tags">Tags: 

<a href="/tags/llamaindex/">llamaindex</a> <a href="/tags/rerank/">rerank</a> <a href="/tags/text-embedding-inherence/">text-embedding-inherence</a>
</div>
    </div>
	<div class="entry-content"><img src="/images/post/2024/01/rag-rerank.png" class="" width="400" height="300">

<p>Rerank åœ¨ RAGï¼ˆRetrieval-Augmented Generationï¼‰è¿‡ç¨‹ä¸­æ‰®æ¼”äº†ä¸€ä¸ªéå¸¸é‡è¦çš„è§’è‰²ï¼Œæ™®é€šçš„ RAG å¯èƒ½ä¼šæ£€ç´¢åˆ°å¤§é‡çš„æ–‡æ¡£ï¼Œä½†è¿™äº›æ–‡æ¡£å¯èƒ½å¹¶ä¸æ˜¯æ‰€æœ‰çš„éƒ½è·Ÿé—®é¢˜ç›¸å…³ï¼Œè€Œ Rerank å¯ä»¥å¯¹æ–‡æ¡£è¿›è¡Œé‡æ–°æ’åºå’Œç­›é€‰ï¼Œè®©ç›¸å…³çš„æ–‡æ¡£æ’åœ¨å‰é¢ï¼Œä»è€Œæé«˜ RAG çš„æ•ˆæœã€‚æœ¬æ–‡å°†ä»‹ç»ä½¿ç”¨ HuggingFace çš„ Text Embedding Inherence å·¥å…·éƒ¨ç½² Rerank æ¨¡å‹ï¼Œä»¥åŠæ¼”ç¤ºå¦‚ä½•åœ¨ LlamaIndex çš„ RAG ä¸­åŠ å…¥ Rerank åŠŸèƒ½ã€‚</p>
<span id="more"></span>

<h2 id="Rerank-ä»‹ç»"><a href="#Rerank-ä»‹ç»" class="headerlink" title="Rerank ä»‹ç»"></a>Rerank ä»‹ç»</h2><p>RAG æ˜¯ä¸€ç§ç»“åˆäº†ä¿¡æ¯æ£€ç´¢å’Œæ–‡æœ¬ç”Ÿæˆçš„è¯­è¨€æ¨¡å‹æŠ€æœ¯ã€‚ç®€å•æ¥è¯´ï¼Œå½“ä½ å‘å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æå‡ºä¸€ä¸ªé—®é¢˜æ—¶ï¼ŒRAG é¦–å…ˆä¼šåœ¨ä¸€ä¸ªå¤§å‹çš„æ–‡æ¡£é›†åˆä¸­å¯»æ‰¾ç›¸å…³ä¿¡æ¯ï¼Œç„¶åå†åŸºäºè¿™äº›ä¿¡æ¯ç”Ÿæˆå›ç­”ã€‚</p>
<p>Rerank çš„å·¥ä½œå°±åƒæ˜¯ä¸€ä¸ªæ™ºèƒ½çš„ç­›é€‰å™¨ï¼Œå½“ RAG ä»æ–‡æ¡£é›†åˆä¸­æ£€ç´¢åˆ°å¤šä¸ªæ–‡æ¡£æ—¶ï¼Œè¿™äº›æ–‡æ¡£å¯èƒ½ä¸ä½ çš„é—®é¢˜ç›¸å…³åº¦å„ä¸ç›¸åŒã€‚æœ‰äº›æ–‡æ¡£å¯èƒ½éå¸¸è´´åˆ‡ï¼Œè€Œæœ‰äº›åˆ™å¯èƒ½åªæ˜¯ç¨å¾®ç›¸å…³æˆ–è€…ç”šè‡³æ˜¯ä¸ç›¸å…³çš„ã€‚è¿™æ—¶ï¼ŒRerank çš„ä»»åŠ¡å°±æ˜¯è¯„ä¼°è¿™äº›æ–‡æ¡£çš„ç›¸å…³æ€§ï¼Œç„¶åå¯¹å®ƒä»¬è¿›è¡Œé‡æ–°æ’åºã€‚å®ƒä¼šæŠŠé‚£äº›æœ€æœ‰å¯èƒ½æä¾›å‡†ç¡®ã€ç›¸å…³å›ç­”çš„æ–‡æ¡£æ’åœ¨å‰é¢ã€‚è¿™æ ·ï¼Œå½“ LLM å¼€å§‹ç”Ÿæˆå›ç­”æ—¶ï¼Œå®ƒä¼šä¼˜å…ˆè€ƒè™‘è¿™äº›æ’åé å‰çš„ã€æ›´åŠ ç›¸å…³çš„æ–‡æ¡£ï¼Œä»è€Œæé«˜ç”Ÿæˆå›ç­”çš„å‡†ç¡®æ€§å’Œè´¨é‡ã€‚é€šä¿—æ¥è¯´ï¼ŒRerank å°±åƒæ˜¯åœ¨å›¾ä¹¦é¦†é‡Œå¸®ä½ ä»ä¸€å †ä¹¦ä¸­æŒ‘å‡ºæœ€ç›¸å…³çš„é‚£å‡ æœ¬ï¼Œè®©ä½ åœ¨å¯»æ‰¾ç­”æ¡ˆæ—¶æ›´åŠ é«˜æ•ˆå’Œç²¾å‡†ã€‚</p>
<img src="/images/post/2024/01/rerank-flow.png" class="" width="1000" height="600">

<h2 id="Rerank-æ¨¡å‹éƒ¨ç½²"><a href="#Rerank-æ¨¡å‹éƒ¨ç½²" class="headerlink" title="Rerank æ¨¡å‹éƒ¨ç½²"></a>Rerank æ¨¡å‹éƒ¨ç½²</h2><p>ç›®å‰å¯ç”¨çš„ Rerank æ¨¡å‹å¹¶ä¸å¤šï¼Œæœ‰ <a target="_blank" rel="noopener" href="https://cohere.com/">Cohere</a> çš„çº¿ä¸Šæ¨¡å‹ï¼Œé€šè¿‡ API çš„å½¢å¼è¿›è¡Œè°ƒç”¨ã€‚å¼€æºçš„æ¨¡å‹æœ‰æ™ºæºçš„<a target="_blank" rel="noopener" href="https://huggingface.co/BAAI/bge-reranker-base">bge-reranker-base</a>ã€<a target="_blank" rel="noopener" href="https://huggingface.co/BAAI/bge-reranker-large">bge-reranker-large</a>ã€‚ä»Šå¤©æˆ‘ä»¬å°†ä½¿ç”¨ bge-reranker-large æ¨¡å‹æ¥è¿›è¡Œéƒ¨ç½²æ¼”ç¤ºã€‚</p>
<h3 id="Text-Embedding-Inherence"><a href="#Text-Embedding-Inherence" class="headerlink" title="Text Embedding Inherence"></a>Text Embedding Inherence</h3><p>æˆ‘ä»¬å°†ä½¿ç”¨ HuggingFace æ¨å‡ºçš„ Text Embedding Inherenceï¼ˆä»¥ä¸‹ç®€ç§° TEIï¼‰å·¥å…·æ¥éƒ¨ç½² Rerank æ¨¡å‹ï¼ŒTEI æ˜¯ä¸€ä¸ªç”¨äºéƒ¨ç½²å’Œæä¾›å¼€æºæ–‡æœ¬åµŒå…¥å’Œåºåˆ—åˆ†ç±»æ¨¡å‹çš„å·¥å…·ï¼Œè¯¥å·¥å…·ä¸»è¦æ˜¯ä»¥éƒ¨ç½² Embedding æ¨¡å‹ä¸ºä¸»ï¼Œä½†æ˜¯ä¹Ÿæ”¯æŒ Rerank å’Œå…¶ä»–ç±»å‹çš„æ¨¡å‹çš„éƒ¨ç½²ï¼ŒåŒæ—¶å®ƒè¿˜æ”¯æŒéƒ¨ç½²å…¼å®¹ OpenAI API çš„ API æœåŠ¡ã€‚</p>
<p>æˆ‘ä»¬å…ˆè¿›è¡Œ TEI çš„å®‰è£…ï¼Œå®‰è£…æ–¹å¼æœ‰ 2 ç§ï¼Œä¸€ç§æ˜¯é€šè¿‡ Docker æ–¹å¼ï¼Œå¦å¤–ä¸€ç§æ˜¯é€šè¿‡æºç å®‰è£…çš„æ–¹å¼ï¼Œå¯ä»¥åŒæ—¶æ”¯æŒ GPU å’Œ CPU çš„æœºå™¨éƒ¨ç½²ã€‚</p>
<p>å› ä¸º Docker å®‰è£…éœ€è¦æœ‰ GPU çš„æœåŠ¡å™¨ï¼Œè€Œä¸€äº›äº‘ GPU æœåŠ¡å™¨ä¸æ–¹ä¾¿ä½¿ç”¨ Dockerï¼Œå› æ­¤æˆ‘ä»¬åœ¨ <strong>Mac M1</strong> ç”µè„‘ä¸Šé€šè¿‡æºç çš„æ–¹å¼æ¥è¿›è¡Œå®‰è£…ã€‚</p>
<p>é¦–å…ˆéœ€è¦åœ¨ç”µè„‘ä¸Šå®‰è£… Rustï¼Œå»ºè®®å®‰è£… Rust çš„æœ€æ–°ç‰ˆæœ¬ 1.75.0ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --proto <span class="string">&#x27;=https&#x27;</span> --tlsv1.2 -sSf https://sh.rustup.rs | sh</span><br></pre></td></tr></table></figure>

<p>ç„¶åä¸‹è½½ TEI çš„ github ä»“åº“ï¼Œå¹¶å®‰è£…ç›¸å…³ä¾èµ–ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/huggingface/text-embeddings-inference.git</span><br><span class="line"><span class="built_in">cd</span> text-embeddings-inference</span><br><span class="line">cargo install --path router -F candle -F metal</span><br></pre></td></tr></table></figure>

<ul>
<li>å…¶ä¸­ router æ˜¯ TEI ä»“åº“é‡Œé¢çš„ä¸€ä¸ªç›®å½•</li>
<li>å®‰è£…æˆåŠŸåï¼Œå¯ä»¥ä½¿ç”¨<code>text-embeddings-router --help</code>å‘½ä»¤æ¥æŸ¥çœ‹å·¥å…·çš„ç›¸å…³å‚æ•°</li>
</ul>
<p>TEI å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒæ¥éƒ¨ç½² Rerank æ¨¡å‹ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">text-embeddings-router --model-id BAAI/bge-reranker-large --revision refs/pr/4 --port 8080</span><br></pre></td></tr></table></figure>

<ul>
<li><code>--model-id</code>æ˜¯æŒ‡æ¨¡å‹åœ¨ Huggingface ä¸Šçš„ IDï¼Œ<code>revision</code>æ˜¯ç›¸å…³çš„ç‰ˆæœ¬å·</li>
<li><code>--port</code>æ˜¯æŒ‡æœåŠ¡çš„ç«¯å£å·</li>
<li>æ‰§è¡Œå‘½ä»¤åï¼ŒTEI ä¼šä» Huggingface ä¸Šä¸‹è½½æ¨¡å‹ï¼Œä¸‹è½½åˆ°æœ¬åœ°è·¯å¾„<code>~/.cache/huggingface/hub/models--BAAI--bge-reranker-large</code></li>
</ul>
<p>æœåŠ¡å¯åŠ¨åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨è®¿é—®åœ°å€<code>http://localhost:8080/docs</code>æ¥æŸ¥çœ‹æœåŠ¡çš„ API æ–‡æ¡£ï¼š</p>
<img src="/images/post/2024/01/tei-api.png" class="" width="1000" height="600">

<p>åœ¨å›¾ä¸­å¯ä»¥çœ‹åˆ°æœ‰ Rerank çš„æ¥å£ï¼Œæˆ‘ä»¬å°è¯•ç”¨ Curl å·¥å…·æ¥è°ƒç”¨è¯¥æ¥å£è¿›è¡ŒéªŒè¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">curl -X <span class="string">&#x27;POST&#x27;</span> \</span><br><span class="line">  <span class="string">&#x27;http://localhost:8080/rerank&#x27;</span> \</span><br><span class="line">  -H <span class="string">&#x27;accept: application/json&#x27;</span> \</span><br><span class="line">  -H <span class="string">&#x27;Content-Type: application/json&#x27;</span> \</span><br><span class="line">  -d <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">  &quot;query&quot;: &quot;What is Deep Learning?&quot;,</span></span><br><span class="line"><span class="string">  &quot;texts&quot;: [</span></span><br><span class="line"><span class="string">    &quot;Deep Learning is ...&quot;,</span></span><br><span class="line"><span class="string">    &quot;hello&quot;</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºç»“æœ</span></span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;index&quot;</span>:0,</span><br><span class="line">    <span class="string">&quot;score&quot;</span>:0.99729556</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;index&quot;</span>:1,</span><br><span class="line">    <span class="string">&quot;score&quot;</span>:0.00009387641</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>Rerank çš„æ¥å£æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦ä¼ é—®é¢˜<code>query</code>å’Œç›¸å…³çš„æ–‡æ¡£<code>texts</code>è¿™ 2 ä¸ªå‚æ•°å³å¯ï¼Œè¿”å›ç»“æœè¡¨ç¤ºæ¯ä¸ªæ–‡æ¡£å’Œé—®é¢˜çš„ç›¸ä¼¼åº¦åˆ†æ•°ï¼Œç„¶åæŒ‰ç…§åˆ†æ•°å¤§å°æ¥è¿›è¡Œæ’åºï¼Œå¯ä»¥çœ‹åˆ°ç¬¬ä¸€ä¸ªæ–‡æ¡£ä¸é—®é¢˜è¯­ä¹‰ç›¸è¿‘æ‰€ä»¥å¾—åˆ†æ¯”è¾ƒé«˜ï¼Œç¬¬äºŒä¸ªæ–‡æ¡£å’Œé—®é¢˜ä¸å¤ªç›¸å…³æ‰€ä»¥å¾—åˆ†ä½ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºè¯¥æ¨¡å‹æ˜¯ Rerank æ¨¡å‹ï¼Œæ‰€ä»¥å¦‚æœæ˜¯è°ƒç”¨å…¶ä¸­çš„<code>embedding</code>æ¥å£ä¼šæŠ¥æ¨¡å‹ä¸æ”¯æŒçš„é”™è¯¯ã€‚å¦‚æœä½ æƒ³åŒæ—¶æ‹¥æœ‰ Rerank å’Œ Embedding çš„åŠŸèƒ½ï¼Œå¯ä»¥å†ä½¿ç”¨ TEI éƒ¨ç½²ä¸€ä¸ª Embedding æ¨¡å‹ï¼Œåªè¦ç«¯å£å·ä¸å†²çªå°±å¯ä»¥äº†ã€‚</p>
<p>TEI ä¹Ÿæ”¯æŒ Embedding æ¨¡å‹å’Œåºåˆ—åˆ†ç±»æ¨¡å‹çš„éƒ¨ç½²ï¼Œå…¶å®ƒæ¨¡å‹çš„éƒ¨ç½²å¯ä»¥å‚è€ƒ TEI çš„<a target="_blank" rel="noopener" href="https://github.com/huggingface/text-embeddings-inference">å®˜æ–¹ä»“åº“</a>ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚</p>
<h2 id="LlamaIndex-ä½¿ç”¨-Rerank-åŠŸèƒ½"><a href="#LlamaIndex-ä½¿ç”¨-Rerank-åŠŸèƒ½" class="headerlink" title="LlamaIndex ä½¿ç”¨ Rerank åŠŸèƒ½"></a>LlamaIndex ä½¿ç”¨ Rerank åŠŸèƒ½</h2><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ LlamaIndex æ™®é€šçš„ RAG åŠŸèƒ½ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> llama_index <span class="keyword">import</span> ServiceContext, VectorStoreIndex, SimpleDirectoryReader</span><br><span class="line"></span><br><span class="line">documents = SimpleDirectoryReader(<span class="string">&quot;./data&quot;</span>).load_data()</span><br><span class="line">service_context = ServiceContext.from_defaults(llm=<span class="literal">None</span>)</span><br><span class="line">index = VectorStoreIndex.from_documents(documents, service_context=service_context)</span><br><span class="line">query_engine = index.as_query_engine()</span><br><span class="line"></span><br><span class="line">response = query_engine.query(<span class="string">&quot;å¥åº·é¥®é£Ÿçš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;response: <span class="subst">&#123;response&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>data</code>æ˜¯æ”¾æˆ‘ä»¬æµ‹è¯•æ–‡æ¡£çš„ç›®å½•ï¼Œæµ‹è¯•æ–‡æ¡£å†…å®¹å¾…ä¼šä¼šä»‹ç»</li>
<li>LlamaIndex é»˜è®¤ä½¿ç”¨ OpenAI çš„ LLMï¼Œè¿™æ ·çš„è¯<code>response</code>æ˜¯ LLM ç”Ÿæˆçš„ç­”æ¡ˆï¼Œè¿™é‡Œæˆ‘ä»¬å°†<code>llm</code>è®¾ç½®ä¸º<code>None</code>ï¼Œ<code>response</code>å°±åªä¼šæ˜¾ç¤ºä¼ é€’ç»™ LLM çš„æç¤ºè¯æ¨¡æ¿</li>
<li>LlamaIndex é»˜è®¤ä½¿ç”¨ OpenAI çš„ Embedding æ¥å‘é‡åŒ–æ–‡æ¡£ï¼Œå› æ­¤éœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡<code>OPENAI_API_KEY</code>ä¸ºä½ çš„ OpenAI API Key</li>
<li>å…¶ä»–éƒ¨åˆ†å°±æ˜¯ LlamaIndex çš„ä¸€ä¸ªæ™®é€š RAG ä»£ç ï¼ŒåŠ è½½ç›®å½•æ–‡æ¡£ï¼Œè§£æåˆ†å—ç´¢å¼•ä¿å­˜ï¼Œæœ€åè¿›è¡ŒæŸ¥è¯¢</li>
</ul>
<p>æˆ‘ä»¬å†æ¥çœ‹ä¸‹æµ‹è¯•æ–‡æ¡£å†…å®¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ tree data</span><br><span class="line">data/</span><br><span class="line">â”œâ”€â”€ rerank-A.txt</span><br><span class="line">â”œâ”€â”€ rerank-B.txt</span><br><span class="line">â””â”€â”€ rerank-C.txt</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cat</span> rerank-A.txt</span><br><span class="line"><span class="comment">### å¿«é¤çš„è´Ÿé¢å½±å“ï¼šå¥åº·ä¸ç”Ÿæ´»æ–¹å¼çš„éšå¿§</span></span><br><span class="line">å¿«é¤ï¼Œä¸€ç§åœ¨ç°ä»£å¿«èŠ‚å¥ç”Ÿæ´»ä¸­æä¸ºæ™®éçš„é¥®é£Ÿé€‰æ‹©......</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cat</span> rerank-B.txt</span><br><span class="line"><span class="comment">### é€‰æ‹©æœ‰æœºï¼Œé€‰æ‹©å¥åº·ï¼šæ¢ç´¢æœ‰æœºé£Ÿå“çš„æ— é™å¥½å¤„</span></span><br><span class="line">åœ¨ä»Šå¤©è¿™ä¸ªæ³¨é‡å¥åº·å’Œå¯æŒç»­ç”Ÿæ´»çš„æ—¶ä»£......</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cat</span> rerank-C.txt</span><br><span class="line"><span class="comment">### å¥åº·é¥®é£Ÿçš„ç›Šå¤„ï¼šè¥å…»å­¦è§†è§’çš„æ¢è®¨</span></span><br><span class="line">æ‘˜è¦ï¼šå¥åº·é¥®é£Ÿæ˜¯ç»´æŒå’Œæå‡æ•´ä½“å¥åº·çš„å…³é”®......</span><br></pre></td></tr></table></figure>

<p>è¿™äº›æµ‹è¯•æ–‡æ¡£éƒ½æ˜¯å’Œé¥®é£Ÿç›¸å…³çš„æ–‡æ¡£ï¼Œæˆ‘ä»¬æ‰§è¡Œä¸‹ä»£ç çœ‹ä¸‹ç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># response æ˜¾ç¤ºç»“æœ</span></span><br><span class="line">LLM is explicitly disabled. Using MockLLM.</span><br><span class="line">response: Context information is below.</span><br><span class="line">---------------------</span><br><span class="line">file_path: data/rerank-C.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">### å¥åº·é¥®é£Ÿçš„ç›Šå¤„ï¼šè¥å…»å­¦è§†è§’çš„æ¢è®¨</span></span><br><span class="line">æ‘˜è¦ï¼šå¥åº·é¥®é£Ÿæ˜¯ç»´æŒå’Œæå‡æ•´ä½“å¥åº·çš„å…³é”®.....</span><br><span class="line"></span><br><span class="line">file_path: data/rerank-A.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">### å¿«é¤çš„è´Ÿé¢å½±å“ï¼šå¥åº·ä¸ç”Ÿæ´»æ–¹å¼çš„éšå¿§</span></span><br><span class="line">å¿«é¤ï¼Œä¸€ç§åœ¨ç°ä»£å¿«èŠ‚å¥ç”Ÿæ´»ä¸­æä¸ºæ™®éçš„é¥®é£Ÿé€‰æ‹©......</span><br><span class="line">---------------------</span><br><span class="line">Given the context information and not prior knowledge, answer the query.</span><br><span class="line">Query: å¥åº·é¥®é£Ÿçš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</span><br><span class="line">Answer:</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ç¨‹åºä¼šæ£€ç´¢å‡ºå’Œé—®é¢˜ç›¸ä¼¼åº¦æœ€é«˜çš„ 2 ä¸ªæ–‡æ¡£<code>rerank-C.txt</code>å’Œ<code>rerank-A.txt</code>ï¼Œä½† A æ–‡æ¡£ä¼¼ä¹å’Œé—®é¢˜å…³è”æ€§ä¸å¤§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Rerank æ¥æ”¹è¿›è¿™ä¸€ç‚¹ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦ä½¿ç”¨ LlamaIndex çš„<code>Node PostProcessor</code>ç»„ä»¶æ¥è°ƒç”¨ Rerank åŠŸèƒ½ï¼Œ<code>Node Postprocessor</code> çš„ä½œç”¨æ˜¯åœ¨æŸ¥è¯¢ç»“æœä¼ é€’åˆ°æŸ¥è¯¢æµç¨‹çš„ä¸‹ä¸€ä¸ªé˜¶æ®µä¹‹å‰ï¼Œä¿®æ”¹æˆ–å¢å¼ºè¿™äº›ç»“æœã€‚å› æ­¤æˆ‘ä»¬å…ˆæ¥å®šä¸€ä¸ªè‡ªå®šä¹‰çš„<code>Node PostProcessor</code>æ¥è°ƒç”¨æˆ‘ä»¬åˆšæ‰éƒ¨ç½²çš„ Rerank æ¥å£ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, <span class="type">Optional</span></span><br><span class="line"><span class="keyword">from</span> llama_index.bridge.pydantic <span class="keyword">import</span> Field, PrivateAttr</span><br><span class="line"><span class="keyword">from</span> llama_index.postprocessor.types <span class="keyword">import</span> BaseNodePostprocessor</span><br><span class="line"><span class="keyword">from</span> llama_index.schema <span class="keyword">import</span> NodeWithScore, QueryBundle</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CustomRerank</span>(<span class="title class_ inherited__">BaseNodePostprocessor</span>):</span><br><span class="line">    url: <span class="built_in">str</span> = Field(description=<span class="string">&quot;Rerank server url.&quot;</span>)</span><br><span class="line">    top_n: <span class="built_in">int</span> = Field(description=<span class="string">&quot;Top N nodes to return.&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params"></span></span><br><span class="line"><span class="params">        self,</span></span><br><span class="line"><span class="params">        top_n: <span class="built_in">int</span>,</span></span><br><span class="line"><span class="params">        url: <span class="built_in">str</span>,</span></span><br><span class="line"><span class="params">    </span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(url=url, top_n=top_n)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">rerank</span>(<span class="params">self, query, texts</span>):</span><br><span class="line">        url = <span class="string">f&quot;<span class="subst">&#123;self.url&#125;</span>/rerank&quot;</span></span><br><span class="line">        request_body = &#123;<span class="string">&quot;query&quot;</span>: query, <span class="string">&quot;texts&quot;</span>: texts, <span class="string">&quot;truncate&quot;</span>: <span class="literal">False</span>&#125;</span><br><span class="line">        response = requests.post(url, json=request_body)</span><br><span class="line">        <span class="keyword">if</span> response.status_code != <span class="number">200</span>:</span><br><span class="line">            <span class="keyword">raise</span> RuntimeError(<span class="string">f&quot;Failed to rerank documents, detail: <span class="subst">&#123;response&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> response.json()</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">class_name</span>(<span class="params">cls</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;CustomerRerank&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_postprocess_nodes</span>(<span class="params"></span></span><br><span class="line"><span class="params">        self,</span></span><br><span class="line"><span class="params">        nodes: <span class="type">List</span>[NodeWithScore],</span></span><br><span class="line"><span class="params">        query_bundle: <span class="type">Optional</span>[QueryBundle] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">    </span>) -&gt; <span class="type">List</span>[NodeWithScore]:</span><br><span class="line">        <span class="keyword">if</span> query_bundle <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;Missing query bundle in extra info.&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(nodes) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">        texts = [node.text <span class="keyword">for</span> node <span class="keyword">in</span> nodes]</span><br><span class="line">        results = <span class="variable language_">self</span>.rerank(</span><br><span class="line">            query=query_bundle.query_str,</span><br><span class="line">            texts=texts,</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        new_nodes = []</span><br><span class="line">        <span class="keyword">for</span> result <span class="keyword">in</span> results[<span class="number">0</span> : <span class="variable language_">self</span>.top_n]:</span><br><span class="line">            new_node_with_score = NodeWithScore(</span><br><span class="line">                node=nodes[<span class="built_in">int</span>(result[<span class="string">&quot;index&quot;</span>])].node,</span><br><span class="line">                score=result[<span class="string">&quot;score&quot;</span>],</span><br><span class="line">            )</span><br><span class="line">            new_nodes.append(new_node_with_score)</span><br><span class="line">        <span class="keyword">return</span> new_nodes</span><br></pre></td></tr></table></figure>

<ul>
<li>æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>CustomRerank</code>ç±»ï¼Œç»§æ‰¿è‡ª<code>BaseNodePostprocessor</code>ï¼Œå¹¶å®ç°äº†<code>_postprocess_nodes</code>æ–¹æ³•</li>
<li><code>CustomRerank</code>ç±»æœ‰ 2 ä¸ªå‚æ•°ï¼Œ<code>url</code>æ˜¯æˆ‘ä»¬åˆšæ‰éƒ¨ç½²çš„ Rerank æœåŠ¡åœ°å€ï¼Œ<code>top_n</code>æ˜¯æŒ‡è¿”å›çš„æ–‡æ¡£æ•°é‡</li>
<li>åœ¨<code>_postprocess_nodes</code>æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å…ˆå°†åŸå§‹æ£€ç´¢åˆ°çš„æ–‡æ¡£è½¬åŒ–ä¸ºæ–‡æœ¬åˆ—è¡¨ï¼Œå†å’Œé—®é¢˜ä¸€èµ·ä¼ é€’ç»™ <code>rerank</code>æ–¹æ³•</li>
<li><code>rerank</code>æ–¹æ³•ä¼šè°ƒç”¨ Rerank æ¥å£ï¼Œè¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼ŒTEI ä¸­çš„ <code>texts</code>å‚æ•°æ¯ä¸ªæ–‡æ¡£çš„é•¿åº¦ä¸èƒ½è¶…è¿‡ 512 ä¸ªå­—ç¬¦ï¼Œå¦‚æœè¶…è¿‡äº†ä¼šæŠ¥ 413 è¯·æ±‚å‚æ•°è¶…è¿‡é™åˆ¶å¤§å°çš„é”™è¯¯ï¼Œè¿™æ—¶å¯ä»¥å°†<code>truncate</code>å‚æ•°è®¾ç½®ä¸º<code>True</code>ï¼Œæ¥å£ä¼šè‡ªåŠ¨å°†è¿‡é•¿çš„æ–‡æ¡£è¿›è¡Œæˆªæ–­</li>
<li>å¾—åˆ° Rerank çš„ç»“æœåï¼Œæˆ‘ä»¬æ ¹æ®<code>top_n</code>å‚æ•°æ¥æˆªå–å‰ N ä¸ªæ–‡æ¡£ï¼Œç„¶åè¿”å›é‡æ–°æ’åºåçš„æ–‡æ¡£åˆ—è¡¨</li>
</ul>
<p>æˆ‘ä»¬å†æ¥çœ‹å¦‚ä½•åœ¨ LlamaIndex ä¸­ä½¿ç”¨<code>CustomRerank</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> custom_rerank <span class="keyword">import</span> CustomRerank</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line">query_engine = index.as_query_engine(</span><br><span class="line">    node_postprocessors=[CustomRerank(url=<span class="string">&quot;http://localhost:8080&quot;</span>, top_n=<span class="number">1</span>)],</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">response = query_engine.query(<span class="string">&quot;å¥åº·é¥®é£Ÿçš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;response: <span class="subst">&#123;response&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>æˆ‘ä»¬åœ¨<code>as_query_engine</code>æ–¹æ³•ä¸­ä¼ é€’äº†<code>node_postprocessors</code>å‚æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬å°†<code>CustomRerank</code>ç±»ä¼ é€’è¿›å»</li>
<li>åœ¨<code>CustomRerank</code>ç±»ä¸­ï¼Œæˆ‘ä»¬è®¾ç½® Rerank çš„ API åœ°å€å’Œ top_n å‚æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸º 1ï¼Œè¡¨ç¤ºåªè¿”å›ä¸€ä¸ªæ–‡æ¡£</li>
</ul>
<p>ä¿®æ”¹å®Œä»£ç åï¼Œæˆ‘ä»¬å†æ¬¡è¿è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># response æ˜¾ç¤ºç»“æœ</span></span><br><span class="line">LLM is explicitly disabled. Using MockLLM.</span><br><span class="line">response: Context information is below.</span><br><span class="line">---------------------</span><br><span class="line">file_path: data/rerank-C.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">### å¥åº·é¥®é£Ÿçš„ç›Šå¤„ï¼šè¥å…»å­¦è§†è§’çš„æ¢è®¨</span></span><br><span class="line">æ‘˜è¦ï¼šå¥åº·é¥®é£Ÿæ˜¯ç»´æŒå’Œæå‡æ•´ä½“å¥åº·çš„å…³é”®.....</span><br><span class="line"></span><br><span class="line">---------------------</span><br><span class="line">Given the context information and not prior knowledge, answer the query.</span><br><span class="line">Query: å¥åº·é¥®é£Ÿçš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</span><br><span class="line">Answer:</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°è¿™æ¬¡ä¼ é€’ç»™ LLM çš„æ–‡æ¡£åªæœ‰<code>rerank-C.txt</code>ï¼ŒRerank åªè·å–äº†æœ€æ¥è¿‘é—®é¢˜çš„ä¸€ä¸ªæ–‡æ¡£ï¼Œè¿™æ · LLM ç”Ÿæˆçš„ç­”æ¡ˆå°±æ›´åŠ å‡†ç¡®äº†ã€‚æˆ‘ä»¬å¯ä»¥åœ¨<code>CustomRerank</code>ç±»æ‰“å°åŸå§‹æ£€ç´¢çš„å¾—åˆ†å’Œç»è¿‡ Rerank åçš„å¾—åˆ†ï¼Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> node score: 0.8659382811170047</span><br><span class="line"><span class="built_in">source</span> node score: 0.8324490144594573</span><br><span class="line">----------------------</span><br><span class="line">rerank node score: 0.9941347</span><br><span class="line">rerank node score: 0.072374016</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ä¸¤è€…çš„å¾—åˆ†æ˜¯æœ‰å·®è·çš„ï¼Œè¿™æ˜¯å› ä¸ºåŸå§‹æ£€ç´¢å’Œ Rerank ä½¿ç”¨çš„æ¨¡å‹ä¸åŒï¼Œæ‰€ä»¥å¾—åˆ°çš„åˆ†æ•°ä¹Ÿä¸åŒã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬ä»‹ç»äº† Rerank æ¨¡å‹çš„éƒ¨ç½²å’Œä½¿ç”¨ï¼ŒRerank æ¨¡å‹å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¯¹æ£€ç´¢åˆ°çš„æ–‡æ¡£è¿›è¡Œé‡æ–°æ’åºï¼Œè®©ç›¸å…³çš„æ–‡æ¡£æ’åœ¨å‰é¢ï¼Œå¹¶ä¸”è¿‡æ»¤æ‰ä¸ç›¸å…³çš„æ–‡æ¡£ï¼Œä»è€Œæé«˜ RAG çš„æ•ˆæœã€‚æˆ‘ä»¬ä½¿ç”¨ HuggingFace çš„ Text Embedding Inherence å·¥å…·æ¥éƒ¨ç½² Rerank æ¨¡å‹ï¼ŒåŒæ—¶æ¼”ç¤ºäº†å¦‚ä½•åœ¨ LlamaIndex çš„ RAG åŠ å…¥ Rerank åŠŸèƒ½ã€‚å¸Œæœ›æœ¬æ–‡å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œå¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ã€‚</p>
<p>å…³æ³¨æˆ‘ï¼Œä¸€èµ·å­¦ä¹ å„ç§äººå·¥æ™ºèƒ½å’Œ AIGC æ–°æŠ€æœ¯ï¼Œæ¬¢è¿äº¤æµï¼Œå¦‚æœä½ æœ‰ä»€ä¹ˆæƒ³é—®æƒ³è¯´çš„ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ã€‚</p>
</div>

</article>
<section id="appreciates">
  <center>
	<h2>èµèµ</h2>
    <div class="post-footer">
      <div>
	    <h4>å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œå¯ä»¥æèµ æˆ‘å–æ¯å’–å•¡ğŸ˜Œï¼Œæèµ æ–¹å¼ï¼š</h4>
        <div class="digital-wallet">
          <h6>BTC åœ°å€ï¼š3LYgSyf7ddMALwGWPQr3PY4wzjsTDdg1oV</h6>
          <h6>ETH åœ°å€ï¼š0x0C9b27c89A61aadb0aEC24CA8949910Cbf77Aa73</h6>
        </div>
        <div class="wechat_appreciates">
          <img src="/images/wechat_appreciates.png" alt="qrcode" width="250" >
        </div>
      </div>
      <div>
	    <h4>æ–‡ç« å·²åŒæ­¥æ›´æ–°å…¬ä¼—å·ï¼Œæ¬¢è¿å…³æ³¨</h4>
        <div class="wechat_appreciates">
          <img src="/images/wxgzh_qrcode.jpg" alt="qrcode" width="250" >
        </div>
      </div>
    </div>
  </center>
</section>



    
      <script type="text/javascript">
        var disqus_config = function () {
            this.page.url = 'https://zhaozhiming.github.io/2024/01/18/rerank-model-deploy-and-usage/';
            this.page.identifier = 'https://zhaozhiming.github.io/2024/01/18/rerank-model-deploy-and-usage/';
        };

        (function() {
          var d = document, s = d.createElement('script');
          s.src = '//zhaozhiming.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>

</div>

    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2024

    èµµèŠæ˜
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a target="_blank" rel="noopener" href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a target="_blank" rel="noopener" href="http://github.com/panks/fabric">fabric</a> by <a target="_blank" rel="noopener" href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5608723650603289" crossorigin="anonymous"></script>
</body>
</html>
