<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>LlamaIndex ä¸ RAG è¯„ä¼°å·¥å…· - Hacker and Geeker&#39;s Way</title>
    <meta name="author" content="">
    
	<meta name="description" content="ä»‹ç»å¯ä»¥å’Œ LlamaIndex é›†æˆä½¿ç”¨çš„ RAG è¯„ä¼°å·¥å…·ï¼Œå¹¶å¯¹å®ƒä»¬è¿›è¡Œå¯¹æ¯”"> <!-- TODO: truncate -->
	<meta name="keywords" content="rag, llamaindex, evalution, trulens, ragas, deepeval, uptrain">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="Hacker and Geeker&#39;s Way" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='/stylesheets/font.css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/font.css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/font.css?family=Amethysta+One' rel='stylesheet' type='text/css'>
	  <script src="/javascripts/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-100485541-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


<meta name="generator" content="Hexo 6.3.0"></head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        Hacker and Geeker&#39;s Way
    </div>
</h1>
<span class="subtitle"></span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a target="_blank" rel="noopener" href="https://github.com/zhaozhiming" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a target="_blank" rel="noopener" href="http://www.twitter.com/kingzzm" class="twitter" title="Twitter"></a>
  </li>
  
  
  <!-- LinkedIn -->
  <li>
  <a target="_blank" rel="noopener" href="http://www.linkedin.com/in/zhaozhiming" class="linkedin" title="LinkedIn"></a>
  </li>
  
  
  
  
  
  <!-- Stackoverflow -->
  <li>
  <a target="_blank" rel="noopener" href="http://stackoverflow.com/users/1954315/zhaozhiming" class="stackoverflow" title="Stackoverflow"></a>
  </li>
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    <li><a href="/about/index.html">About</a></li>
    
    <li>
    <div id="dark">
        <form action="//www.google.com.hk/search" method="get" accept-charset="UTF-8" id="search">
            <input type="hidden" name="sitesearch" value="https://zhaozhiming.github.io" />
            <input type="text" name="q" results="0" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>


<div id="toload">
<!-- begin toload -->
    <div id="content">
        <div class="inner">
<article class="post">
	<h2 class="title">LlamaIndex ä¸ RAG è¯„ä¼°å·¥å…·</h2>
    <div class="meta">
        <div class="date">Published on: <time datetime="2024-04-22T13:41:27.000Z" itemprop="datePublished">4æœˆ 22, 2024</time>
</div>
        <div class="tags">Tags: 

<a href="/tags/llamaindex/">llamaindex</a> <a href="/tags/rag/">rag</a> <a href="/tags/trulens/">trulens</a> <a href="/tags/evalution/">evalution</a> <a href="/tags/ragas/">ragas</a> <a href="/tags/deepeval/">deepeval</a> <a href="/tags/uptrain/">uptrain</a>
</div>
    </div>
	<div class="entry-content"><img src="/images/post/2024/04/rag-evaluation.jpeg" class="" width="400" height="300">

<p>LlamaIndex æ˜¯ä¸€ä¸ª LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œå¾ˆå¤šå¼€å‘äººå‘˜å–œæ¬¢ç”¨å®ƒæ¥å¼€å‘ RAGï¼ˆRetrieval-Augmented Generationï¼‰åº”ç”¨ï¼Œåœ¨å¼€å‘ RAG åº”ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¯¹ç›¸å…³æ•°æ®è¿›è¡Œè¯„ä¼°ï¼Œä»¥ä¾¿æ›´å¥½åœ°å¯¹åº”ç”¨è¿›è¡Œè°ƒæ•´å’Œä¼˜åŒ–ã€‚éšç€ RAG æŠ€æœ¯çš„å‘å±•ï¼Œå‡ºç°äº†è¶Šæ¥è¶Šå¤šä¼˜ç§€çš„è¯„ä¼°å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ–¹ä¾¿ä¸”å‡†ç¡®åœ°è¯„ä¼° RAG åº”ç”¨ã€‚ä»Šå¤©ï¼Œæˆ‘å°†ä»‹ç»ä¸€äº›å¯ä»¥å’Œ LlamaIndex é›†æˆä½¿ç”¨çš„ RAG è¯„ä¼°å·¥å…·ï¼Œå¹¶å¯¹å®ƒä»¬è¿›è¡Œå¯¹æ¯”åˆ†æã€‚</p>
<span id="more"></span>

<h2 id="ä»€ä¹ˆæ˜¯-RAG-è¯„ä¼°å·¥å…·"><a href="#ä»€ä¹ˆæ˜¯-RAG-è¯„ä¼°å·¥å…·" class="headerlink" title="ä»€ä¹ˆæ˜¯ RAG è¯„ä¼°å·¥å…·"></a>ä»€ä¹ˆæ˜¯ RAG è¯„ä¼°å·¥å…·</h2><p>RAG è¯„ä¼°å·¥å…·æ˜¯ä¸€ç§ç”¨äºæµ‹è¯•å’Œè¯„ä¼°åŸºäºæ£€ç´¢çš„æ–‡æœ¬ç”Ÿæˆç³»ç»Ÿçš„æ–¹æ³•æˆ–æ¡†æ¶ï¼Œè¯„ä¼°çš„å†…å®¹åŒ…æ‹¬æ£€ç´¢çš„å‡†ç¡®æ€§ã€ç”Ÿæˆå†…å®¹çš„è´¨é‡å’Œç›¸å…³æ€§ç­‰ï¼Œè¯„ä¼°æŒ‡æ ‡åŒ…æ‹¬ç²¾ç¡®åº¦ã€å¬å›ç‡ã€ä¸€è‡´æ€§å’Œåˆç†æ€§ç­‰ã€‚å®ƒå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜æ›´å¥½åœ°äº†è§£å’Œä¼˜åŒ– RAG åº”ç”¨ï¼Œä½¿å…¶æ›´é€‚ç”¨äºå®é™…åº”ç”¨ã€‚ç›¸å¯¹äºäººå·¥è¯„ä¼°ï¼ŒRAG è¯„ä¼°å·¥å…·æ›´åŠ å®¢è§‚ã€å‡†ç¡®å’Œé«˜æ•ˆï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡è‡ªåŠ¨åŒ–çš„æ–¹å¼è¿›è¡Œå¤§è§„æ¨¡çš„è¯„ä¼°ï¼Œä»è€Œè®©åº”ç”¨æ›´å¿«åœ°è¿›è¡Œè¿­ä»£å’Œä¼˜åŒ–ã€‚å®é™…ä¸Šæœ‰ä¸€äº›åº”ç”¨å·²ç»åœ¨è¿™æ ·åšäº†ï¼Œå°† RAG è¯„ä¼°å·¥å…·é›†æˆåˆ° CI&#x2F;CD æµç¨‹ä¸­ï¼Œå®ç°ç³»ç»Ÿçš„è‡ªåŠ¨åŒ–è¯„ä¼°å’Œä¼˜åŒ–ã€‚</p>
<h2 id="å®ä½“æœ¯è¯­"><a href="#å®ä½“æœ¯è¯­" class="headerlink" title="å®ä½“æœ¯è¯­"></a>å®ä½“æœ¯è¯­</h2><p>åœ¨ RAG åº”ç”¨ä¸­æœ‰ä¸€äº›å¸¸ç”¨çš„å®ä½“ï¼Œè¯„ä¼°å·¥å…·ä¸»è¦ä½¿ç”¨è¿™äº›å®ä½“æ¥è¿›è¡Œè¯„ä¼°ï¼Œä½†åœ¨ä¼—å¤šçš„ RAG è¯„ä¼°å·¥å…·ä¸­ï¼Œè¿™äº›å®ä½“çš„åç§°å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œå› æ­¤åœ¨ä»‹ç»å…·ä½“çš„è¯„ä¼°å·¥å…·ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹è¿™äº›å®ä½“çš„å®šä¹‰ï¼š</p>
<ul>
<li>Question: æŒ‡ç”¨æˆ·è¾“å…¥çš„é—®é¢˜ï¼ŒRAG åº”ç”¨é€šè¿‡é—®é¢˜æ£€ç´¢åˆ°ç›¸å…³çš„æ–‡æ¡£ä¸Šä¸‹æ–‡ï¼Œåœ¨ä¸€äº›è¯„ä¼°å·¥å…·ä¸­ï¼Œè¿™ä¸ªå®ä½“ä¹Ÿä¼šè¢«ç§°å‘¼æˆ<code>Input</code>æˆ–è€…<code>Query</code></li>
<li>Context: æŒ‡æ£€ç´¢åˆ°çš„æ–‡æ¡£ä¸Šä¸‹æ–‡ï¼ŒRAG åº”ç”¨æ£€ç´¢åˆ°ç›¸å…³æ–‡æ¡£åä¼šå°†è¿™äº›ä¸Šä¸‹æ–‡ç»“åˆç”¨æˆ·é—®é¢˜ä¸€èµ·æäº¤ç»™ LLMï¼Œæœ€åç”Ÿæˆç­”æ¡ˆï¼Œæœ‰çš„è¯„ä¼°å·¥å…·ä¼šå°†å…¶ç§°å‘¼ä¸º<code>Retrieval Context</code></li>
<li>Answer: æŒ‡ç”Ÿæˆçš„ç­”æ¡ˆï¼ŒRAG åº”ç”¨å°†é—®é¢˜å’Œä¸Šä¸‹æ–‡æäº¤ç»™ LLM åï¼ŒLLM ä¼šæ ¹æ®è¿™äº›ä¿¡æ¯æ¥ç”Ÿæˆç­”æ¡ˆï¼Œè¿™ä¸ªå®ä½“çš„ç§°å‘¼æ¯”è¾ƒå¤šæ ·ï¼ŒåŒ…æ‹¬ï¼š<code>Actual Output</code>ã€<code>Response</code>ç­‰</li>
<li>Grouth Truth: æŒ‡äººå·¥æ ‡æ³¨çš„æ­£ç¡®ç­”æ¡ˆï¼Œåˆ©ç”¨è¿™ä¸ªå®ä½“å¯ä»¥å¯¹ç”Ÿæˆçš„ç­”æ¡ˆè¿›è¡Œåˆ†æï¼Œä»è€Œå¾—åˆ°è¯„ä¼°ç»“æœï¼Œæœ‰çš„è¯„ä¼°å·¥å…·ä¼šå°†å…¶ç§°å‘¼ä¸º<code>Expected Output</code></li>
</ul>
<p>åœ¨ä¸‹é¢çš„è¯„ä¼°å·¥å…·ä»‹ç»ä¸­ï¼Œä¹Ÿä¼šæ²¿ç”¨è¿™äº›å®ä½“æœ¯è¯­ï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£å’Œå¯¹æ¯”ã€‚</p>
<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><h3 id="æµ‹è¯•æ–‡æ¡£"><a href="#æµ‹è¯•æ–‡æ¡£" class="headerlink" title="æµ‹è¯•æ–‡æ¡£"></a>æµ‹è¯•æ–‡æ¡£</h3><p>æˆ‘ä»¬ç»Ÿä¸€ä½¿ç”¨å¤§å®¶ç†ŸçŸ¥çš„æ¼«å¨ç”µå½±<strong>å¤ä»‡è€…è”ç›Ÿ</strong>ç›¸å…³å‰§æƒ…æ¥ä½œä¸ºæµ‹è¯•æ–‡æ¡£ï¼Œæ–‡æ¡£å†…å®¹ä¸»è¦ä»ç»´åŸºç™¾ç§‘ä¸Šçš„<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Avenger">å¤ä»‡è€…è”ç›Ÿ</a>æ¡ç›®ä¸­è·å–ï¼Œä¸»è¦åŒ…æ‹¬ 4 éƒ¨å¤ä»‡è€…è”ç›Ÿç”µå½±çš„å‰§æƒ…ä¿¡æ¯ã€‚</p>
<h3 id="æ•°æ®é›†"><a href="#æ•°æ®é›†" class="headerlink" title="æ•°æ®é›†"></a>æ•°æ®é›†</h3><p>åŸºäºæµ‹è¯•æ–‡æ¡£ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»º<code>Question</code>å’Œ<code>Ground Truth</code>çš„æ•°æ®ï¼Œè¿™æ ·æ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œè¯„ä¼°å·¥ä½œï¼Œä¸‹é¢æ˜¯æˆ‘ä»¬å®šä¹‰çš„æ•°æ®é›†ï¼š</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">questions = [</span><br><span class="line">    <span class="string">&quot;æ´›åŸºä½¿ç”¨äº†å“ªç§ç¥ç§˜ç‰©å“è¯•å›¾å¾æœåœ°çƒï¼Ÿ&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å¥¥åˆ›æ˜¯ç”±å“ªä¸¤ä½å¤ä»‡è€…è”ç›Ÿæˆå‘˜åˆ›é€ çš„ï¼Ÿ&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç­éœ¸å¦‚ä½•å®ç°ç­ç»å®‡å®™ä¸€åŠç”Ÿå‘½çš„è®¡åˆ’ï¼Ÿ&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å¤ä»‡è€…è”ç›Ÿç”¨ä»€ä¹ˆæ–¹æ³•æ¥é€†è½¬ç­éœ¸çš„è¡ŒåŠ¨ï¼Ÿ&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ä¸ºäº†å‡»è´¥ç­éœ¸ï¼Œå“ªä½å¤ä»‡è€…è”ç›Ÿæˆå‘˜ç‰ºç‰²äº†è‡ªå·±ï¼Ÿ&quot;</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">ground_truth = [</span><br><span class="line">    <span class="string">&quot;å®‡å®™é­”æ–¹&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ‰˜å°¼Â·æ–¯å¡”å…‹ï¼ˆé’¢é“ä¾ ï¼‰å’Œå¸ƒé²æ–¯Â·ç­çº³ï¼ˆç»¿å·¨äººï¼‰&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ä½¿ç”¨å…­é¢—æ— é™å®çŸ³&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é€šè¿‡æ—¶é—´æ—…è¡Œæ”¶é›†å®çŸ³&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ‰˜å°¼Â·æ–¯å¡”å…‹ï¼ˆé’¢é“ä¾ ï¼‰&quot;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="æ£€ç´¢å¼•æ“"><a href="#æ£€ç´¢å¼•æ“" class="headerlink" title="æ£€ç´¢å¼•æ“"></a>æ£€ç´¢å¼•æ“</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬å†ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://www.llamaindex.ai/">LlamaIndex</a> æ¥åˆ›å»ºä¸€ä¸ªæ™®é€šçš„ RAG æ£€ç´¢å¼•æ“ï¼Œåé¢è¯„ä¼°å·¥å…·ä¼šä½¿ç”¨è¯¥æ£€ç´¢å¼•æ“æ¥ç”Ÿæˆ<code>Answer</code>å’Œ<code>Context</code>ï¼š</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> llama_index.core <span class="keyword">import</span> VectorStoreIndex, SimpleDirectoryReader</span><br><span class="line"></span><br><span class="line">documents = SimpleDirectoryReader(<span class="string">&quot;./data&quot;</span>).load_data()</span><br><span class="line">vector_index = VectorStoreIndex.from_documents(documents)</span><br><span class="line">query_engine = vector_index.as_query_engine(similiarity_top_k=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>æˆ‘ä»¬å…ˆä»<code>data</code>ç›®å½•ä¸­åŠ è½½æ–‡æ¡£</li>
<li>ç„¶åä½¿ç”¨<code>VectorStoreIndex</code>æ¥åˆ›å»ºä¸€ä¸ªæ–‡æ¡£å‘é‡ç´¢å¼•</li>
<li>æœ€åå°†æ–‡æ¡£å‘é‡ç´¢å¼•è½¬æ¢ä¸ºæŸ¥è¯¢å¼•æ“ï¼Œå¹¶è®¾ç½®ç›¸ä¼¼åº¦é˜ˆå€¼ä¸º 2</li>
</ul>
<h2 id="TruLens"><a href="#TruLens" class="headerlink" title="TruLens"></a>TruLens</h2><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ <a target="_blank" rel="noopener" href="https://www.trulens.org/">TruLens</a>ï¼Œå®ƒæ˜¯ä¸€æ¬¾æ—¨åœ¨è¯„ä¼°å’Œæ”¹è¿› LLM åº”ç”¨çš„è½¯ä»¶å·¥å…·ã€‚</p>
<img src="/images/post/2024/01/rag_triad.jpg" class="" width="1000" height="600">

<h3 id="è¯„ä¼°æŒ‡æ ‡"><a href="#è¯„ä¼°æŒ‡æ ‡" class="headerlink" title="è¯„ä¼°æŒ‡æ ‡"></a>è¯„ä¼°æŒ‡æ ‡</h3><p>Trulens ä¸»è¦ä½¿ç”¨ä»¥ä¸‹æŒ‡æ ‡æ¥è¯„ä¼° RAG åº”ç”¨ï¼š</p>
<ul>
<li>Anwer Relevanceï¼šè¡¡é‡<code>Answer</code>å¦‚ä½•è§£ç­”<code>Question</code>ï¼Œç¡®ä¿å…¶å…·æœ‰å¸®åŠ©æ€§å’Œç›¸å…³æ€§ã€‚</li>
<li>Context Relevanceï¼šè¯„ä¼°<code>Context</code>ä¸<code>Question</code>çš„ç›¸å…³æ€§ã€‚è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œå› ä¸ºä¸Šä¸‹æ–‡æ„æˆäº† LLM ç­”æ¡ˆçš„åŸºç¡€ã€‚</li>
<li>Groundednessï¼šè¯„ä¼°<code>Answer</code>æ˜¯å¦ä¸<code>Context</code>ä¸­æä¾›çš„äº‹å®ä¿æŒä¸€è‡´ï¼Œç¡®ä¿ä¸å¤¸å¤§æˆ–åç¦»ç»™å®šçš„ä¿¡æ¯ã€‚</li>
<li>Ground Truthï¼šè¯„ä¼°<code>Answer</code>ä¸<code>Ground Truth</code>ä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼Œç¡®ä¿ç”Ÿæˆçš„ç­”æ¡ˆä¸äººå·¥æ ‡æ³¨çš„ç­”æ¡ˆä¸€è‡´ã€‚</li>
</ul>
<h3 id="ä½¿ç”¨ç¤ºä¾‹"><a href="#ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h3><p>ä¸‹é¢æ˜¯ä½¿ç”¨ TruLens è¿›è¡Œ RAG è¯„ä¼°çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> trulens_eval <span class="keyword">import</span> Tru, Feedback, TruLlama</span><br><span class="line"><span class="keyword">from</span> trulens_eval.feedback.provider.openai <span class="keyword">import</span> OpenAI</span><br><span class="line"><span class="keyword">from</span> trulens_eval.feedback <span class="keyword">import</span> Groundedness, GroundTruthAgreement</span><br><span class="line"></span><br><span class="line">openai = OpenAI()</span><br><span class="line">golden_set = [&#123;<span class="string">&quot;query&quot;</span>: q, <span class="string">&quot;response&quot;</span>: r&#125; <span class="keyword">for</span> q, r <span class="keyword">in</span> <span class="built_in">zip</span>(questions, ground_truth)]</span><br><span class="line">ground_truth = Feedback(</span><br><span class="line">    GroundTruthAgreement(golden_set).agreement_measure, name=<span class="string">&quot;Ground Truth&quot;</span></span><br><span class="line">).on_input_output()</span><br><span class="line"></span><br><span class="line">grounded = Groundedness(groundedness_provider=openai)</span><br><span class="line">groundedness = (</span><br><span class="line">    Feedback(grounded.groundedness_measure_with_cot_reasons, name=<span class="string">&quot;Groundedness&quot;</span>)</span><br><span class="line">    .on(TruLlama.select_source_nodes().node.text)</span><br><span class="line">    .on_output()</span><br><span class="line">    .aggregate(grounded.grounded_statements_aggregator)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">qa_relevance = Feedback(</span><br><span class="line">    openai.relevance_with_cot_reasons, name=<span class="string">&quot;Answer Relevance&quot;</span></span><br><span class="line">).on_input_output()</span><br><span class="line"></span><br><span class="line">qs_relevance = (</span><br><span class="line">    Feedback(openai.qs_relevance_with_cot_reasons, name=<span class="string">&quot;Context Relevance&quot;</span>)</span><br><span class="line">    .on_input()</span><br><span class="line">    .on(TruLlama.select_source_nodes().node.text)</span><br><span class="line">    .aggregate(np.mean)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">tru_query_engine_recorder = TruLlama(</span><br><span class="line">    query_engine,</span><br><span class="line">    app_id=<span class="string">&quot;Avengers_App&quot;</span>,</span><br><span class="line">    feedbacks=[</span><br><span class="line">        ground_truth,</span><br><span class="line">        groundedness,</span><br><span class="line">        qa_relevance,</span><br><span class="line">        qs_relevance,</span><br><span class="line">    ],</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tru_query_engine_recorder <span class="keyword">as</span> recording:</span><br><span class="line">    <span class="keyword">for</span> question <span class="keyword">in</span> questions:</span><br><span class="line">        query_engine.query(question)</span><br><span class="line"></span><br><span class="line">tru = Tru()</span><br><span class="line">tru.run_dashboard()</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç ä¸»è¦æ˜¯ä½¿ç”¨ TruLens å¯¹ RAG åº”ç”¨è¿›è¡Œè¯„ä¼°ï¼Œé¦–å…ˆæˆ‘ä»¬å®šä¹‰äº†<code>Ground Truth</code>ã€<code>Groundedness</code>ã€<code>Answer Relevance</code>å’Œ<code>Context Relevance</code>ç­‰åé¦ˆæŒ‡æ ‡ï¼Œç„¶åä½¿ç”¨<code>TruLlama</code>æ¥è®°å½•æŸ¥è¯¢å¼•æ“çš„æŸ¥è¯¢ç»“æœï¼Œæœ€åä½¿ç”¨<code>Tru</code>æ¥è¿è¡Œè¯„ä¼°å¹¶å±•ç¤ºè¯„ä¼°ç»“æœã€‚</p>
<h3 id="è¯„ä¼°ç»“æœ"><a href="#è¯„ä¼°ç»“æœ" class="headerlink" title="è¯„ä¼°ç»“æœ"></a>è¯„ä¼°ç»“æœ</h3><p>Trulens çš„è¯„ä¼°ç»“æœå¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®æœ¬åœ°æœåŠ¡æ¥è¿›è¡ŒæŸ¥çœ‹ï¼Œè¯„ä¼°ç»“æœä¸­æ•´ä½“çš„è¯„åˆ†å’Œè¯¦ç»†çš„è¯„ä¼°æŒ‡æ ‡éƒ½ä¼šå±•ç¤ºå‡ºæ¥ï¼Œè€Œä¸”æŒ‡æ ‡çš„å¾—åˆ†åŸå› ä¹Ÿå¯ä»¥åœ¨è¯„ä¼°ç»“æœä¸­æŸ¥çœ‹ï¼Œä¸‹é¢æ˜¯ TruLens çš„è¯„ä¼°ç»“æœï¼š</p>
<img src="/images/post/2024/04/evaluate-trulens.png" class="" width="1000" height="400">

<p>ä¹‹å‰æˆ‘å·²ç»å†™è¿‡ä¸€ç¯‡å…³äº Trulens çš„æ–‡ç« ï¼Œå¯ä»¥æŸ¥çœ‹<a href="https://zhaozhiming.github.io/2024/01/29/use-trulens-to-evaluate-rag-application/">è¿™é‡Œ</a>ï¼Œé‡Œé¢æœ‰æ›´è¯¦ç»†çš„ä»‹ç»å’Œä½¿ç”¨ç¤ºä¾‹ã€‚</p>
<h2 id="Ragas"><a href="#Ragas" class="headerlink" title="Ragas"></a>Ragas</h2><p><a target="_blank" rel="noopener" href="https://github.com/explodinggradients/ragas">Ragas</a> æ˜¯å¦å¤–ä¸€ä¸ªè¯„ä¼° RAG åº”ç”¨çš„æ¡†æ¶ï¼Œç›¸æ¯” Trulensï¼ŒRagas æ‹¥æœ‰æ›´å¤šä¸”æ›´è¯¦ç»†çš„è¯„ä¼°æŒ‡æ ‡ã€‚</p>
<img src="/images/post/2024/04/ragas-metrics.jpeg" class="" width="1000" height="400">

<h3 id="è¯„ä¼°æŒ‡æ ‡-1"><a href="#è¯„ä¼°æŒ‡æ ‡-1" class="headerlink" title="è¯„ä¼°æŒ‡æ ‡"></a>è¯„ä¼°æŒ‡æ ‡</h3><p>Ragas ä¸»è¦ä½¿ç”¨ä»¥ä¸‹æŒ‡æ ‡æ¥è¯„ä¼° RAG åº”ç”¨ï¼š</p>
<ul>
<li>Faithfulness: è¯„ä¼°<code>Question</code>å’Œ<code>Context</code>çš„ä¸€è‡´æ€§ï¼Œç±»ä¼¼äº Trulens çš„ Groundedness</li>
<li>Answer Relevance: è¯„ä¼°<code>Answer</code>å’Œ<code>Question</code>çš„ä¸€è‡´æ€§ï¼Œç±»ä¼¼äº Trulens çš„ Answer Relevance</li>
<li>Context Precision: è¯„ä¼°<code>Ground Truth</code>åœ¨<code>Context</code>ä¸­æ˜¯å¦æ’åé å‰</li>
<li>Context Recall: è¯„ä¼°<code>Ground Truth</code>å’Œ<code>Context</code>çš„ä¸€è‡´æ€§</li>
<li>Context Entities Recall: è¯„ä¼°<code>Ground Truth</code>ä¸­çš„å®ä½“å’Œ<code>Context</code>ä¸­çš„å®ä½“çš„ä¸€è‡´æ€§</li>
<li>Context Relevancy: è¯„ä¼°<code>Question</code>å’Œ<code>Context</code>çš„ä¸€è‡´æ€§ï¼Œç±»ä¼¼äº Trulens çš„ Context Relevance</li>
<li>Answer Semantic Similarity: è¯„ä¼°<code>Answer</code>å’Œ<code>Ground Truth</code>çš„è¯­ä¹‰ç›¸ä¼¼æ€§</li>
<li>Answer Correctness: è¯„ä¼°<code>Answer</code>ç›¸å¯¹äº<code>Ground Truth</code>çš„æ­£ç¡®æ€§ï¼Œè¿™ä¸ªæŒ‡æ ‡ä¼šç”¨åˆ°<code>Answer Semantic Similarity</code>çš„ç»“æœï¼Œç±»ä¼¼äº Trulens çš„ Ground Truth</li>
<li>Aspect Critique: å…¶ä»–æ–¹é¢çš„è¯„ä¼°ï¼Œæ¯”å¦‚æœ‰å®³æ€§ã€æ­£ç¡®æ€§ç­‰</li>
</ul>
<h3 id="ä½¿ç”¨ç¤ºä¾‹-1"><a href="#ä½¿ç”¨ç¤ºä¾‹-1" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h3><p>åœ¨ Ragas çš„å®˜æ–¹æ–‡æ¡£<a target="_blank" rel="noopener" href="https://docs.ragas.io/en/latest/howtos/integrations/llamaindex.html">é›†æˆ LlamaIndex çš„ç¤ºä¾‹</a>ä¸­ï¼Œé‡Œé¢çš„ä»£ç å·²ç»è¿‡æ—¶ï¼ŒRagas åœ¨æœ€æ–°ç‰ˆæœ¬ä¸­å·²ç»ä¸å†æ”¯æŒè¿™ç§é›†æˆæ–¹å¼ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è‡ªå·±æ‰‹åŠ¨é›†æˆ LlamaIndexï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„é›†æˆç¤ºä¾‹ï¼š</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> ragas.metrics <span class="keyword">import</span> (</span><br><span class="line">    faithfulness,</span><br><span class="line">    answer_relevancy,</span><br><span class="line">    context_relevancy,</span><br><span class="line">    answer_correctness,</span><br><span class="line">)</span><br><span class="line"><span class="keyword">from</span> ragas <span class="keyword">import</span> evaluate</span><br><span class="line"><span class="keyword">from</span> datasets <span class="keyword">import</span> Dataset</span><br><span class="line"></span><br><span class="line">metrics = [</span><br><span class="line">    faithfulness,</span><br><span class="line">    answer_relevancy,</span><br><span class="line">    context_relevancy,</span><br><span class="line">    answer_correctness,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">answers = []</span><br><span class="line">contexts = []</span><br><span class="line"><span class="keyword">for</span> q <span class="keyword">in</span> questions:</span><br><span class="line">    response = query_engine.query(q)</span><br><span class="line">    answers.append(response.response)</span><br><span class="line">    contexts.append([sn.get_content() <span class="keyword">for</span> sn <span class="keyword">in</span> response.source_nodes])</span><br><span class="line"></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&quot;question&quot;</span>: questions,</span><br><span class="line">    <span class="string">&quot;contexts&quot;</span>: contexts,</span><br><span class="line">    <span class="string">&quot;answer&quot;</span>: answers,</span><br><span class="line">    <span class="string">&quot;ground_truth&quot;</span>: ground_truth,</span><br><span class="line">&#125;</span><br><span class="line">dataset = Dataset.from_dict(data)</span><br><span class="line">result = evaluate(dataset, metrics)</span><br><span class="line">result.to_pandas().to_csv(<span class="string">&quot;output/ragas-evaluate.csv&quot;</span>, sep=<span class="string">&quot;,&quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>æˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨åŸæ¥çš„é—®é¢˜å’Œç­”æ¡ˆæ•°æ®ï¼š<code>questions</code>å’Œ<code>ground_truth</code></li>
<li>ä½¿ç”¨å’Œ Trulens ç±»ä¼¼çš„è¯„ä¼°æŒ‡æ ‡ï¼ŒåŒ…æ‹¬<code>faithfulness</code>ã€<code>answer_relevancy</code>ã€<code>context_relevancy</code>å’Œ<code>answer_correctness</code></li>
<li>éœ€è¦æ‰‹åŠ¨æ„é€ è¯„ä¼°çš„æ•°æ®é›†ï¼Œé€šè¿‡æé—®æ¯ä¸ªé—®é¢˜è·å–ç”Ÿæˆç­”æ¡ˆå’Œä¸Šä¸‹æ–‡ï¼Œæ·»åŠ åˆ°<code>data</code>ä¸­</li>
<li>æœ€åå°†æ•°æ®é›†ä¼ å…¥<code>evaluate</code>å‡½æ•°è¿›è¡Œè¯„ä¼°ï¼Œå¹¶å°†è¯„ä¼°ç»“æœä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ä¸­</li>
</ul>
<h3 id="è¯„ä¼°ç»“æœ-1"><a href="#è¯„ä¼°ç»“æœ-1" class="headerlink" title="è¯„ä¼°ç»“æœ"></a>è¯„ä¼°ç»“æœ</h3><p>æˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°æ–‡ä»¶ä¸­æŸ¥çœ‹ Ragas çš„è¯„ä¼°ç»“æœï¼Œè¯„ä¼°ç»“æœä¸­åŒ…æ‹¬äº†å„ä¸ªè¯„ä¼°æŒ‡æ ‡çš„å¾—åˆ†ï¼Œä¸‹é¢æ˜¯ Ragas çš„è¯„ä¼°ç»“æœï¼š</p>
<img src="/images/post/2024/04/evaluate-ragas.png" class="" width="1000" height="400">

<p>å¯ä»¥çœ‹åˆ° Ragas çš„è¯„ä¼°ç»“æœå’Œ Trulens çš„è¯„ä¼°ç»“æœå·®åˆ«è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œç‰¹åˆ«æ˜¯<code>Context Relevancy</code>çš„è¯„ä¼°ç»“æœï¼Œå¾—åˆ†æ¯”è¾ƒä½ï¼Œå…¶å®åœ¨è¯„ä¼°<code>Context</code>æ—¶ Ragas æ›´æ¨èä½¿ç”¨<code>Context Precision</code>å’Œ<code>Context Recall</code>è¿™ 2 ä¸ªè¯„ä¼°æŒ‡æ ‡ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸ºäº†å’Œ Trulens çš„è¯„ä¼°ç»“æœå¯¹æ¯”ï¼Œæ‰€ä»¥ä½¿ç”¨äº†<code>Context Relevancy</code>ã€‚</p>
<p>åœ¨ Ragas çš„è¯„ä¼°ç»“æœä¸­ï¼Œæˆ‘ä»¬åªçœ‹åˆ°äº†åˆ†æ•°ï¼Œä½†æ²¡æœ‰çœ‹åˆ°å¾—åˆ†çš„å…·ä½“åŸå› ã€‚</p>
<h2 id="DeepEval"><a href="#DeepEval" class="headerlink" title="DeepEval"></a>DeepEval</h2><p><a target="_blank" rel="noopener" href="https://github.com/confident-ai/deepeval">DeepEval</a> æ˜¯ä¸€ä¸ªé¢å‘ LLM çš„å¼€æºè¯„ä¼°æ¡†æ¶ï¼Œå®ƒçš„æœ€å¤§ç‰¹ç‚¹æ˜¯å¯ä»¥åƒå•å…ƒæµ‹è¯•ä¸€æ ·æ¥è¿è¡Œè¯„ä¼°ä»»åŠ¡ï¼Œè¿™æ ·å¯ä»¥æ›´æ–¹ä¾¿åœ°å¯¹ RAG åº”ç”¨è¿›è¡Œæ£€æŸ¥å’Œä¼˜åŒ–ã€‚</p>
<img src="/images/post/2024/04/deepeval-workflow.png" class="" width="1000" height="400">

<h3 id="è¯„ä¼°æŒ‡æ ‡-2"><a href="#è¯„ä¼°æŒ‡æ ‡-2" class="headerlink" title="è¯„ä¼°æŒ‡æ ‡"></a>è¯„ä¼°æŒ‡æ ‡</h3><p>DeepEval ä¸»è¦ä½¿ç”¨ä»¥ä¸‹è¯„ä¼°æŒ‡æ ‡ï¼Œå…¶ä¸­åªæœ‰éƒ¨åˆ†æŒ‡æ ‡æ˜¯ç”¨æ¥è¯„ä¼° RAG åº”ç”¨çš„ï¼Œå¦ä¸€éƒ¨åˆ†çš„æŒ‡æ ‡æ˜¯é’ˆå¯¹å…¶ä»–æ–¹é¢çš„ LLM åº”ç”¨ï¼š</p>
<ul>
<li>Faithfulness: è¯„ä¼°<code>Question</code>å’Œ<code>Context</code>çš„ä¸€è‡´æ€§ï¼Œç±»ä¼¼äº Trulens çš„ Groundedness</li>
<li>Answer Relevance: è¯„ä¼°<code>Answer</code>å’Œ<code>Question</code>çš„ä¸€è‡´æ€§ï¼Œç±»ä¼¼äº Trulens çš„ Answer Relevance</li>
<li>Contextual Precision: è¯„ä¼°<code>Ground Truth</code>åœ¨<code>Context</code>ä¸­æ˜¯å¦æ’åé å‰ï¼Œç±»ä¼¼äº Ragas çš„ Context Precision</li>
<li>Contextual Recall: è¯„ä¼°<code>Ground Truth</code>å’Œ<code>Context</code>çš„ä¸€è‡´æ€§ï¼Œç±»ä¼¼äº Ragas çš„ Context Recall</li>
<li>Contextual Relevancy: è¯„ä¼°<code>Question</code>å’Œ<code>Context</code>çš„ä¸€è‡´æ€§ï¼Œç±»ä¼¼äº Trulens çš„ Context Relevance</li>
<li>Hullucinationï¼šè¯„ä¼°å¹»è§‰å­˜åœ¨ç¨‹åº¦</li>
<li>Biasï¼šè¯„ä¼°åè§å­˜åœ¨ç¨‹åº¦</li>
<li>Toxicity: è¯„ä¼°<strong>æ¯’æ€§</strong>å­˜åœ¨ç¨‹åº¦ï¼Œæ¯’æ€§æ˜¯æŒ‡äººèº«æ”»å‡»ã€å˜²è®½ã€åŒæ¶ã€è´¬ä½ã€å¨èƒå’Œæå“ç­‰</li>
<li>Ragas: å¯ä»¥ä½¿ç”¨ Ragas çš„è¯„ä¼°ï¼Œå¹¶ç”Ÿæˆå¾—åˆ†çš„åŸå› </li>
<li>Knowledge Retention: è¯„ä¼° LLM åº”ç”¨çš„ä¿¡æ¯æŒä¹…åŒ–æƒ…å†µ</li>
<li>Summarizationï¼šå¯¹äºæ–‡æ¡£æ€»ç»“æ•ˆæœçš„è¯„ä¼°</li>
<li>G-Evalï¼šG-Eval æ˜¯ä¸€ä¸ªä½¿ç”¨å…·æœ‰æ€ç»´é“¾ (CoT) çš„ LLM æ¥æ‰§è¡Œè¯„ä¼°ä»»åŠ¡çš„æ¡†æ¶ï¼Œå®ƒå¯ä»¥æ ¹æ®ä»»ä½•è‡ªå®šä¹‰æ ‡å‡†è¯„ä¼° LLM çš„è¾“å‡ºç»“æœï¼Œè¿™é‡Œæ˜¯<a target="_blank" rel="noopener" href="https://arxiv.org/abs/2303.16634">ç›¸å…³è®ºæ–‡</a></li>
</ul>
<h3 id="ä½¿ç”¨ç¤ºä¾‹-2"><a href="#ä½¿ç”¨ç¤ºä¾‹-2" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h3><p>DeepEval å¯ä»¥åƒæ‰§è¡Œå•å…ƒæµ‹è¯•ä¸€æ ·æ¥è¿è¡Œè¯„ä¼°ä»»åŠ¡ï¼Œæ‰€ä»¥æ‰§è¡Œæ–‡ä»¶éœ€è¦ä»¥<code>test_</code>å¼€å¤´ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"><span class="keyword">from</span> deepeval.metrics <span class="keyword">import</span> (</span><br><span class="line">    AnswerRelevancyMetric,</span><br><span class="line">    FaithfulnessMetric,</span><br><span class="line">    ContextualRelevancyMetric,</span><br><span class="line">)</span><br><span class="line"><span class="keyword">from</span> deepeval.test_case <span class="keyword">import</span> LLMTestCase</span><br><span class="line"><span class="keyword">from</span> deepeval <span class="keyword">import</span> assert_test</span><br><span class="line"><span class="keyword">from</span> deepeval.dataset <span class="keyword">import</span> EvaluationDataset</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">genrate_dataset</span>():</span><br><span class="line">    test_cases = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(questions)):</span><br><span class="line">        response = query_engine.query(questions[i])</span><br><span class="line">        test_case = LLMTestCase(</span><br><span class="line">            <span class="built_in">input</span>=questions[i],</span><br><span class="line">            actual_output=response.response,</span><br><span class="line">            retrieval_context=[node.get_content() <span class="keyword">for</span> node <span class="keyword">in</span> response.source_nodes],</span><br><span class="line">            expected_output=ground_truth[i],</span><br><span class="line">        )</span><br><span class="line">        test_cases.append(test_case)</span><br><span class="line">    <span class="keyword">return</span> EvaluationDataset(test_cases=test_cases)</span><br><span class="line"></span><br><span class="line">dataset = genrate_dataset()</span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="meta">    <span class="string">&quot;test_case&quot;</span>,</span></span></span><br><span class="line"><span class="params"><span class="meta">    dataset,</span></span></span><br><span class="line"><span class="params"><span class="meta"></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_rag</span>(<span class="params">test_case: LLMTestCase</span>):</span><br><span class="line">    answer_relevancy_metric = AnswerRelevancyMetric(model=<span class="string">&quot;gpt-3.5-turbo&quot;</span>)</span><br><span class="line">    faithfulness_metric = FaithfulnessMetric(model=<span class="string">&quot;gpt-3.5-turbo&quot;</span>)</span><br><span class="line">    context_relevancy_metric = ContextualRelevancyMetric(model=<span class="string">&quot;gpt-3.5-turbo&quot;</span>)</span><br><span class="line">    assert_test(</span><br><span class="line">        test_case,</span><br><span class="line">        [answer_relevancy_metric, faithfulness_metric, context_relevancy_metric],</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<ul>
<li>æ‰§è¡Œ DeepEval è¯„ä¼°ä»»åŠ¡åŒæ ·éœ€è¦å…ˆæ„é€ æµ‹è¯•æ•°æ®é›†ï¼Œæ•°æ®é›†ä¸­åŒ…å«äº†é—®é¢˜ã€ç”Ÿæˆç­”æ¡ˆã€ä¸Šä¸‹æ–‡å’Œæ ‡å‡†ç­”æ¡ˆè¿™äº›ä¿¡æ¯</li>
<li>è¯„ä¼°æŒ‡æ ‡æˆ‘ä»¬ä½¿ç”¨äº†<code>Faithfulness</code>ï¼Œ<code>Answer Relevance</code>å’Œ<code>Context Relevance</code>ï¼Œå› ä¸º DeepEval ä¸­æ²¡æœ‰<code>Ground Truth</code>è¿™ä¸ªæŒ‡æ ‡ï¼Œæ‰€ä»¥æ— æ³•å’Œ Trulens å’Œ Ragas çš„è¯„ä¼°ç»“æœä¿æŒä¸€è‡´</li>
<li><strong>DeepEval é»˜è®¤ä½¿ç”¨çš„æ˜¯<code>gpt-4</code>æ¨¡å‹</strong>ï¼Œå¦‚æœè¦çœé’±çš„è¯ï¼Œå»ºè®®åœ¨è¯„ä¼°æŒ‡æ ‡ä¸­æŒ‡å®šæ¨¡å‹åç§°ï¼Œæ¯”å¦‚<code>gpt-3.5-turbo</code></li>
<li>DeepEval çš„è¯„ä¼°æŒ‡æ ‡ç±»ä¸­è¿˜æœ‰ä¸€ä¸ª<code>threshold</code>å‚æ•°ï¼Œé»˜è®¤å€¼æ˜¯ 0.5ï¼Œè¡¨ç¤ºè¯„ä¼°æŒ‡æ ‡çš„é˜ˆå€¼ï¼Œå¦‚æœå¾—åˆ†ä½äºé˜ˆå€¼ï¼Œåˆ™è¡¨ç¤ºæµ‹è¯•å¤±è´¥</li>
</ul>
<p>ç„¶ååœ¨ç»ˆç«¯ä¸­è¿è¡Œå‘½ä»¤<code>deepeval test run test_deepeval.py</code>æ¥æ‰§è¡Œè¯„ä¼°ä»»åŠ¡ï¼Œæ‰§è¡Œäº†å‘½ä»¤åï¼ŒDeepEval ä¼šè‡ªåŠ¨è¿è¡Œè¯„ä¼°ä»»åŠ¡ï¼Œå¹¶è¾“å‡ºè¯„ä¼°ç»“æœï¼Œå¦‚æœæµ‹è¯•é€šè¿‡ï¼Œåˆ™ä¼šæ˜¾ç¤º<code>PASSED</code>ï¼Œå¦åˆ™ä¼šæ˜¾ç¤º<code>FAILED</code>ï¼Œæœ€ç»ˆæ˜¾ç¤ºå®Œæ•´çš„è¯„ä¼°ç»“æœã€‚</p>
<img src="/images/post/2024/04/run-deepeval.png" class="" width="1000" height="400">

<h3 id="è¯„ä¼°ç»“æœ-2"><a href="#è¯„ä¼°ç»“æœ-2" class="headerlink" title="è¯„ä¼°ç»“æœ"></a>è¯„ä¼°ç»“æœ</h3><p>åœ¨ç»ˆç«¯æŸ¥çœ‹è¯„ä¼°ç»“æœå¯èƒ½ä¸å¤ªæ–¹ä¾¿ï¼ŒDeepEvel æä¾›å¦å¤–å‡ ç§æ–¹å¼ä¾›æˆ‘ä»¬æ›´å¥½åœ°æŸ¥çœ‹è¯„ä¼°ç»“æœã€‚</p>
<p>ä¸€ç§æ–¹å¼æ˜¯å°†è¯„ä¼°ç»“æœä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ä¸­ï¼Œéœ€è¦åœ¨æ‰§è¡Œæµ‹è¯•å‘½ä»¤ä¹‹å‰è®¾ç½®ç¯å¢ƒå˜é‡<code>export DEEPEVAL_RESULTS_FOLDER=&quot;./output&quot;</code>ï¼Œè¿™æ ·æ‰§è¡Œåçš„ç»“æœå°±ä¼šä»¥ JSON çš„å½¢å¼ä¿å­˜åˆ°<code>output</code>ç›®å½•çš„æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹æ–‡ä»¶æ¥æŸ¥çœ‹è¯„ä¼°ç»“æœã€‚</p>
<p>å¦å¤–ä¸€ç§æ–¹å¼æ˜¯æ³¨å†Œ<a target="_blank" rel="noopener" href="https://app.confident-ai.com/">Confident</a>è´¦å·ï¼Œè·å– API_KEYï¼Œç„¶ååœ¨ç»ˆç«¯ä½¿ç”¨å‘½ä»¤<code>deepeval login --confident-api-key your_api_key</code>è¿›è¡Œç™»å½•ï¼Œç„¶åå†æ‰§è¡Œæµ‹è¯•å‘½ä»¤ï¼Œè¿™æ ·å‘½ä»¤æ‰§è¡Œå®Œæˆåä¼šè‡ªåŠ¨å°†ç»“æœä¸Šä¼ åˆ° Confident å¹³å°ï¼Œæ–¹ä¾¿æŸ¥çœ‹ï¼Œä¸‹é¢æ˜¯ Confident å¹³å°çš„è¯„ä¼°ç»“æœæˆªå›¾ï¼š</p>
<img src="/images/post/2024/04/confident-deepeval.png" class="" width="1000" height="400">

<p>åœ¨ç½‘ç«™ä¸Šè¿˜å¯ä»¥å°†è¯„ä¼°ç»“æœå¯¼å‡ºä¸º CSV æ–‡ä»¶ï¼Œè¿™æ ·åœ¨æœ¬åœ°ä¹Ÿå¯ä»¥è¿›è¡ŒæŸ¥çœ‹ï¼š</p>
<img src="/images/post/2024/04/evaluate-deepeval.png" class="" width="1000" height="400">

<h2 id="UpTrain"><a href="#UpTrain" class="headerlink" title="UpTrain"></a>UpTrain</h2><p><a target="_blank" rel="noopener" href="https://github.com/uptrain-ai/uptrain">UpTrain</a> æ˜¯ä¸€ä¸ªç”¨äºè¯„ä¼°å’Œæ”¹è¿›çš„ LLM åº”ç”¨ç¨‹åºçš„å¼€æºå¹³å°ï¼Œä¸å…¶ä»–è¯„ä¼°å·¥å…·ç›¸æ¯”ï¼ŒUpTrain å…·æœ‰æœ€ä¸ºä¸°å¯Œçš„è¯„ä¼°æŒ‡æ ‡ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜æ›´å…¨é¢åœ°äº†è§£å’Œä¼˜åŒ– RAG åº”ç”¨ã€‚</p>
<img src="/images/post/2024/04/uptrain.png" class="" width="1000" height="400">

<h3 id="è¯„ä¼°æŒ‡æ ‡-3"><a href="#è¯„ä¼°æŒ‡æ ‡-3" class="headerlink" title="è¯„ä¼°æŒ‡æ ‡"></a>è¯„ä¼°æŒ‡æ ‡</h3><p>UpTrain ä¸»è¦ä½¿ç”¨ä»¥ä¸‹è¯„ä¼°æŒ‡æ ‡ï¼Œä¸ä»…é€‚ç”¨äº RAG åº”ç”¨ï¼Œè¿˜é€‚ç”¨äºå…¶ä»– LLM åº”ç”¨ï¼š</p>
<ul>
<li>Response Matching: è¯„ä¼°<code>Answer</code>å’Œ<code>Ground Truth</code>çš„ä¸€è‡´æ€§ï¼Œç±»ä¼¼äº Trulens çš„ Ground Truth</li>
<li>Response Completeness: è¯„ä¼°<code>Answer</code>æ˜¯å¦å›ç­”äº†<code>Question</code>çš„æ‰€æœ‰æ–¹é¢</li>
<li>Response Conciseness: è¯„ä¼°<code>Answer</code>æ˜¯å¦å›ç­”äº†è·Ÿ<code>Question</code>ä¸ç›¸å…³çš„å†…å®¹</li>
<li>Response Relevance: è¯„ä¼°<code>Answer</code>å’Œ<code>Question</code>çš„ç›¸å…³æ€§ï¼Œç±»ä¼¼äº Trulens çš„ Answer Relevance</li>
<li>Response Validity: è¯„ä¼°<code>Answer</code>æ˜¯å¦æœ‰æ•ˆï¼Œæ— æ•ˆçš„å›ç­”æ˜¯æŒ‡ç­”æ¡ˆä¸ºç©ºæˆ–è€…<strong>æˆ‘ä¸çŸ¥é“</strong>ç­‰è¯¸å¦‚æ­¤ç±»çš„å›ç­”</li>
<li>Response Consistency: è¯„ä¼°<code>Answer</code>å’Œ<code>Question</code>ä»¥åŠ<code>Context</code>çš„ä¸€è‡´æ€§</li>
<li>Context Relevance: è¯„ä¼°<code>Context</code>å’Œ<code>Question</code>çš„ç›¸å…³æ€§ï¼Œç±»ä¼¼äº Trulens çš„ Context Relevance</li>
<li>Context Utilization: è¯„ä¼°<code>Answer</code>æ ¹æ®<code>Context</code>æ˜¯å¦å®Œæ•´å›ç­”äº†<code>Question</code>çš„æ‰€æœ‰é—®é¢˜ç‚¹</li>
<li>Factual Accuracy: è¯„ä¼°<code>Answer</code>æ˜¯äº‹å®æ­£ç¡®çš„ï¼Œå¹¶ä¸”æ˜¯é€šè¿‡<code>Context</code>å¾—åˆ°çš„ç­”æ¡ˆï¼Œæ„Ÿè§‰æ˜¯ Trulens çš„ Groundedness çš„åŠ å¼ºç‰ˆ</li>
<li>Context Conciseness: è¯„ä¼°<code>Context</code>æ˜¯å¦ç®€æ´å…³é”®ï¼Œæ²¡æœ‰åŒ…å«æ— å…³ä¿¡æ¯ï¼Œéœ€è¦æ·»åŠ  concise_context å‚æ•°è¿›è¡Œè¯„ä¼°</li>
<li>Context Reranking: è¯„ä¼°é‡æ’åçš„<code>Context</code>å’ŒåŸå§‹<code>Context</code>çš„æœ‰æ•ˆæ€§ï¼Œéœ€è¦æ·»åŠ  rerank_context å‚æ•°è¿›è¡Œè¯„ä¼°</li>
<li>Jailbreak detection: è¯„ä¼°<code>Question</code>æ˜¯å¦å«æœ‰è¶Šç‹±æç¤ºè¯ï¼Œå¼•å¯¼ç”Ÿæˆä¸è‰¯ä¿¡æ¯</li>
<li>Prompt Injection: è¯„ä¼°<code>Question</code>æ˜¯å¦ä¼šæ³„éœ² LLM åº”ç”¨çš„ç³»ç»Ÿæç¤ºè¯</li>
<li>Language Features: è¯„ä¼°<code>Answer</code>æ˜¯å¦ç®€æ´ã€è¿è´¯ï¼Œæ²¡æœ‰è¯­æ³•é”™è¯¯ç­‰</li>
<li>Tonality: è¯„ä¼°<code>Answer</code>æ˜¯å¦ç¬¦åˆæŸä¸ªè§’è‰²çš„è¯­æ°”ï¼Œéœ€è¦é¢å¤–çš„å‚æ•°å‚ä¸è¯„ä¼°</li>
<li>Sub-query Completeness: è¯„ä¼°å­é—®é¢˜æ˜¯å¦èƒ½è¦†ç›–åŸå§‹<code>Question</code>çš„æ‰€æœ‰æ–¹é¢ï¼Œéœ€è¦æ·»åŠ  sub_questions å‚æ•°è¿›è¡Œè¯„ä¼°</li>
<li>Multi-query Accuracy: è¯„ä¼°å˜ç§é—®é¢˜æ˜¯å¦ä¸åŸå§‹<code>Question</code>ä¸€è‡´ï¼Œéœ€è¦æ·»åŠ  variants å‚æ•°è¿›è¡Œè¯„ä¼°</li>
<li>Code Hallucination: è¯„ä¼°<code>Answer</code>ä¸­çš„ä»£ç æ˜¯å¦ä¸<code>Context</code>ç›¸å…³è”</li>
<li>User Satisfaction: è¯„ä¼°å¯¹è¯ä¸­çš„ç”¨æˆ·æ»¡æ„åº¦</li>
</ul>
<h3 id="ä½¿ç”¨ç¤ºä¾‹-3"><a href="#ä½¿ç”¨ç¤ºä¾‹-3" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h3><p>UpTrain é›†æˆäº† LlamaIndexï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒçš„<code>EvalLlamaIndex</code>æ¥åˆ›å»ºè¯„ä¼°å¯¹è±¡ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆ<code>Answer</code>å’Œ<code>Context</code>ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> uptrain <span class="keyword">import</span> EvalLlamaIndex, Evals, ResponseMatching, Settings</span><br><span class="line"></span><br><span class="line">settings = Settings(</span><br><span class="line">    openai_api_key=os.getenv(<span class="string">&quot;OPENAI_API_KEY&quot;</span>),</span><br><span class="line">)</span><br><span class="line">data = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(questions)):</span><br><span class="line">    data.append(</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;question&quot;</span>: questions[i],</span><br><span class="line">            <span class="string">&quot;ground_truth&quot;</span>: ground_truth[i],</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">llamaindex_object = EvalLlamaIndex(settings=settings, query_engine=query_engine)</span><br><span class="line">results = llamaindex_object.evaluate(</span><br><span class="line">    data=data,</span><br><span class="line">    checks=[</span><br><span class="line">        ResponseMatching(),</span><br><span class="line">        Evals.CONTEXT_RELEVANCE,</span><br><span class="line">        Evals.FACTUAL_ACCURACY,</span><br><span class="line">        Evals.RESPONSE_RELEVANCE,</span><br><span class="line">    ],</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;output/uptrain-evaluate.json&quot;</span>, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> json_file:</span><br><span class="line">    json.dump(results, json_file, indent=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>UpTrain é»˜è®¤ä½¿ç”¨ OpenAI çš„æ¨¡å‹è¿›è¡Œè¯„ä¼°ï¼Œå› æ­¤éœ€è¦è®¾ç½® OpenAI çš„ API_KEY</li>
<li>åœ¨åˆå§‹çš„æµ‹è¯•æ•°æ®é›†ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦æä¾›é—®é¢˜å’Œæ ‡å‡†ç­”æ¡ˆï¼Œå…¶ä»–çš„æ•°æ®ä¼šç”± EvalLlamaIndex è‡ªåŠ¨ç”Ÿæˆ</li>
<li>åœ¨è¯„ä¼°æŒ‡æ ‡ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å’Œå…¶ä»–è¯„ä¼°å·¥å…·ç±»ä¼¼çš„è¯„ä¼°æŒ‡æ ‡</li>
<li>æœ€åå°†è¯„ä¼°ç»“æœä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ä¸­</li>
</ul>
<h3 id="è¯„ä¼°ç»“æœ-3"><a href="#è¯„ä¼°ç»“æœ-3" class="headerlink" title="è¯„ä¼°ç»“æœ"></a>è¯„ä¼°ç»“æœ</h3><p>è¯„ä¼°ç»“æœä¿å­˜åœ¨ JSON æ–‡ä»¶ä¸­ï¼Œä¸ºäº†æ–¹ä¾¿å¯¹æ¯”ï¼Œæˆ‘ä»¬å°†è¯„ä¼°ç»“æœè½¬æ¢ä¸º CSV æ–‡ä»¶ï¼Œä¸‹é¢æ˜¯ UpTrain çš„è¯„ä¼°ç»“æœï¼š</p>
<img src="/images/post/2024/04/evaluate-uptrain.png" class="" width="1000" height="400">

<p>UpTrain è¯„ä¼°ç»“æœä¸­çš„<code>Response Matching</code>çš„ç»“æœæ„Ÿè§‰ä¸å¤ªå‡†ç¡®ï¼Œå®é™…ä¸Šè¿è¡Œäº†<code>Response Matching</code>è¯„ä¼°æŒ‡æ ‡åä¼šäº§ç”Ÿ 3 ä¸ªåˆ†æ•°ï¼Œåˆ†åˆ«æ˜¯<code>score_response_match</code>ã€<code>score_response_match_recall</code>ã€<code>score_response_match_recall</code>ï¼Œä½†å³ä½¿<code>Answer</code>å’Œ<code>Ground Truth</code>ç±»ä¼¼ï¼Œè¿™å‡ ä¸ªåˆ†æ•°æœ‰æ—¶å€™ä¹Ÿæ˜¯ 0ï¼Œä¸å¤ªæ¸…æ¥šè¿™ä¸ªé—®é¢˜çš„åŸå› ï¼Œå¦‚æœæœ‰äººçŸ¥é“ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ã€‚</p>
<h2 id="å¯¹æ¯”åˆ†æ"><a href="#å¯¹æ¯”åˆ†æ" class="headerlink" title="å¯¹æ¯”åˆ†æ"></a>å¯¹æ¯”åˆ†æ</h2><img src="/images/post/2024/04/evaluate-compare.png" class="" width="1000" height="400">

<ul>
<li>è¯„ä¼°æŒ‡æ ‡ï¼šTrulens çš„è¯„ä¼°æŒ‡æ ‡ç›¸å¯¹è¾ƒå°‘ï¼ŒDeepEval å’Œ UpTrain çš„è¯„ä¼°æŒ‡æ ‡è™½ç„¶è¾ƒå¤šï¼Œä½†æœ‰ä¸€éƒ¨åˆ†ä¸æ˜¯ç»™ RAG åº”ç”¨ä½¿ç”¨çš„ï¼ŒRagas çš„è¯„ä¼°æŒ‡æ ‡è™½ç„¶ä¸å¤šï¼Œä½†åŸºæœ¬ä¸Šè¦†ç›–äº† RAG åº”ç”¨çš„æ‰€æœ‰æ–¹é¢</li>
<li>è‡ªå®šä¹‰è¯„ä¼°ï¼šDeepEval å’Œ UpTrain æ”¯æŒè‡ªå®šä¹‰è¯„ä¼°æŒ‡æ ‡ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚æ¥è¿›è¡Œè¯„ä¼°ï¼ŒTrulens å’Œ Ragas ä¸æ”¯æŒè‡ªå®šä¹‰è¯„ä¼°æŒ‡æ ‡</li>
<li>è‡ªå®šä¹‰ LLMï¼šè¿™å‡ ä¸ªè¯„ä¼°å·¥å…·åŸºæœ¬ä¸Šéƒ½æ”¯æŒè‡ªå®šä¹‰ LLMï¼ŒRagas é€šè¿‡ LangChain æ¥å®ç°è‡ªå®šä¹‰ LLM</li>
<li>æ¡†æ¶é›†æˆï¼šè¿™é‡Œä¸»è¦æ¯”è¾ƒæ˜¯å¦æ”¯æŒ LlamaIndex å’Œ LangChain è¿™ 2 ä¸ªä¸»æµçš„ LLM å¼€å‘æ¡†æ¶ï¼ŒTrulens å’Œ Ragas éƒ½æ”¯æŒè¿™ 2 ä¸ªæ¡†æ¶ï¼ŒDeepEval å’Œ UpTrain åªæ”¯æŒ LlamaIndex</li>
<li>WebUIï¼šWebUI é¡µé¢å¯ä»¥æ–¹ä¾¿æŸ¥çœ‹è¯„ä¼°ç»“æœï¼Œé™¤äº† Ragasï¼Œå…¶ä»–è¯„ä¼°å·¥å…·éƒ½æ”¯æŒ WebUIï¼Œä½† Ragas å¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹å·¥å…·æ¥å®ç° WebUI</li>
<li>å¾—åˆ†åŸå› ï¼šé™¤äº† Ragasï¼Œå…¶ä»–è¯„ä¼°å·¥å…·éƒ½æ”¯æŒç”Ÿæˆå¾—åˆ†åŸå› ï¼ŒRagas ä¸æ”¯æŒï¼Œä½† DeepEvel å¯ä»¥å¸®åŠ© Ragas ç”Ÿæˆå¾—åˆ†åŸå› </li>
<li>å•å…ƒæµ‹è¯•ï¼šè¿™ä¸ªç‰¹æ€§æ˜¯ DeepEvel ç‹¬æœ‰çš„ï¼Œå¯ä»¥åƒå•å…ƒæµ‹è¯•ä¸€æ ·æ¥è¿è¡Œè¯„ä¼°ä»»åŠ¡ï¼Œå…¶ä»–è¯„ä¼°å·¥å…·éƒ½ä¸æ”¯æŒ</li>
</ul>
<p>Trulens å’Œ Ragas æ˜¯ç›¸å¯¹å‡ºç°è¾ƒæ—©çš„ RAG è¯„ä¼°å·¥å…·ï¼Œè€Œ DeepEval å’Œ UpTrain æ˜¯åèµ·ä¹‹ç§€ï¼Œå®ƒä»¬å¯èƒ½æ˜¯å—åˆ° Trulens å’Œ Ragas çš„å¯å‘è€Œå¼€å‘çš„ï¼Œå› æ­¤åœ¨è¯„ä¼°æŒ‡æ ‡å’ŒåŠŸèƒ½ä¸Šéƒ½æœ‰æ‰€å¢åŠ å’Œæ”¹è¿›ï¼Œä½† Trulens å’Œ Ragas ä¹Ÿæœ‰è‡ªå·±çš„ä¼˜åŠ¿ï¼Œæ¯”å¦‚ Trulens çš„è¯„ä¼°ç»“æœæ¯”è¾ƒç›´è§‚ï¼ŒRagas çš„è¯„ä¼°æŒ‡æ ‡æ›´åŠ é€‚åˆ RAG åº”ç”¨ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº†å¯ä»¥å’Œ LlamaIndex é›†æˆä½¿ç”¨çš„ RAG è¯„ä¼°å·¥å…·ï¼Œå¹¶å¯¹å®ƒä»¬è¿›è¡Œäº†å¯¹æ¯”ï¼Œè¿™äº›è¯„ä¼°å·¥å…·éƒ½å¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜æ›´å¥½åœ°äº†è§£å’Œä¼˜åŒ– RAG åº”ç”¨ã€‚å®é™…ä¸Šè¿˜æœ‰å…¶ä»–è¯„ä¼°å·¥å…·ï¼Œæ¯”å¦‚ LlamaIndex è‡ªå¸¦çš„è¯„ä¼°å·¥å…·ã€<a target="_blank" rel="noopener" href="https://github.com/TonicAI/tonic_validate">Tonic Validate</a>ç­‰ï¼Œå› ä¸ºç¯‡å¹…æœ‰é™ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†ï¼Œå¦‚æœä½ ä¸çŸ¥é“è¯¥é€‰æ‹©å“ªä¸ªè¯„ä¼°å·¥å…·ï¼Œå»ºè®®æ˜¯å…ˆé€‰æ‹©å…¶ä¸­ä¸€ä¸ªå¹¶åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œå¦‚æœå‘ç°ä¸åˆé€‚ï¼Œå†å°è¯•å…¶ä»–è¯„ä¼°å·¥å…·ã€‚</p>
<p>å…³æ³¨æˆ‘ï¼Œä¸€èµ·å­¦ä¹ å„ç§äººå·¥æ™ºèƒ½å’Œ AIGC æ–°æŠ€æœ¯ï¼Œæ¬¢è¿äº¤æµï¼Œå¦‚æœä½ æœ‰ä»€ä¹ˆæƒ³é—®æƒ³è¯´çš„ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ã€‚</p>
</div>

</article>
<section id="appreciates">
  <center>
	<h2>èµèµ</h2>
    <div class="post-footer">
      <div>
	    <h4>å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œå¯ä»¥æèµ æˆ‘å–æ¯å’–å•¡ğŸ˜Œï¼Œæèµ æ–¹å¼ï¼š</h4>
        <div class="digital-wallet">
          <h6>BTC åœ°å€ï¼š3LYgSyf7ddMALwGWPQr3PY4wzjsTDdg1oV</h6>
          <h6>ETH åœ°å€ï¼š0x0C9b27c89A61aadb0aEC24CA8949910Cbf77Aa73</h6>
        </div>
        <div class="wechat_appreciates">
          <img src="/images/wechat_appreciates.png" alt="qrcode" width="250" >
        </div>
      </div>
      <div>
	    <h4>æ–‡ç« å·²åŒæ­¥æ›´æ–°å…¬ä¼—å·ï¼Œæ¬¢è¿å…³æ³¨</h4>
        <div class="wechat_appreciates">
          <img src="/images/wxgzh_qrcode.jpg" alt="qrcode" width="250" >
        </div>
      </div>
    </div>
  </center>
</section>



    
      <script type="text/javascript">
        var disqus_config = function () {
            this.page.url = 'https://zhaozhiming.github.io/2024/04/22/llamaindex-and-evaluation-tools/';
            this.page.identifier = 'https://zhaozhiming.github.io/2024/04/22/llamaindex-and-evaluation-tools/';
        };

        (function() {
          var d = document, s = d.createElement('script');
          s.src = '//zhaozhiming.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>

</div>

    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2025

    èµµèŠæ˜
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a target="_blank" rel="noopener" href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a target="_blank" rel="noopener" href="http://github.com/panks/fabric">fabric</a> by <a target="_blank" rel="noopener" href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5608723650603289" crossorigin="anonymous"></script>
</body>
</html>
